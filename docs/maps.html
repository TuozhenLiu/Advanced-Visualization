<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Maps | é«˜çº§ç»Ÿè®¡ç»˜å›¾</title>
  <meta name="description" content="Chapter 4 Maps | é«˜çº§ç»Ÿè®¡ç»˜å›¾" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Maps | é«˜çº§ç»Ÿè®¡ç»˜å›¾" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Maps | é«˜çº§ç»Ÿè®¡ç»˜å›¾" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="other-advanced-plots.html"/>
<link rel="next" href="plotly.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><strong>ğŸ“Š é«˜çº§ç»Ÿè®¡ç»˜å›¾</strong></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>2</b> ggplot2</a>
<ul>
<li class="chapter" data-level="2.1" data-path="ggplot2.html"><a href="ggplot2.html#æ•£ç‚¹å›¾"><i class="fa fa-check"></i><b>2.1</b> æ•£ç‚¹å›¾</a></li>
<li class="chapter" data-level="2.2" data-path="ggplot2.html"><a href="ggplot2.html#æ¡å½¢å›¾å’Œç®±çº¿å›¾"><i class="fa fa-check"></i><b>2.2</b> æ¡å½¢å›¾å’Œç®±çº¿å›¾</a></li>
<li class="chapter" data-level="2.3" data-path="ggplot2.html"><a href="ggplot2.html#ç›´æ–¹å›¾å’Œå¯†åº¦æ›²çº¿å›¾"><i class="fa fa-check"></i><b>2.3</b> ç›´æ–¹å›¾å’Œå¯†åº¦æ›²çº¿å›¾</a></li>
<li class="chapter" data-level="2.4" data-path="ggplot2.html"><a href="ggplot2.html#æ—¶é—´åºåˆ—å›¾"><i class="fa fa-check"></i><b>2.4</b> æ—¶é—´åºåˆ—å›¾</a></li>
<li class="chapter" data-level="2.5" data-path="ggplot2.html"><a href="ggplot2.html#å›¾å½¢æ ‡æ³¨"><i class="fa fa-check"></i><b>2.5</b> å›¾å½¢æ ‡æ³¨</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="other-advanced-plots.html"><a href="other-advanced-plots.html"><i class="fa fa-check"></i><b>3</b> Other Advanced Plots</a>
<ul>
<li class="chapter" data-level="3.1" data-path="other-advanced-plots.html"><a href="other-advanced-plots.html#ä¸‰ç»´å›¾å½¢"><i class="fa fa-check"></i><b>3.1</b> ä¸‰ç»´å›¾å½¢</a></li>
<li class="chapter" data-level="3.2" data-path="other-advanced-plots.html"><a href="other-advanced-plots.html#è¯äº‘"><i class="fa fa-check"></i><b>3.2</b> è¯äº‘</a></li>
<li class="chapter" data-level="3.3" data-path="other-advanced-plots.html"><a href="other-advanced-plots.html#æ•£ç‚¹å›¾çŸ©é˜µä¸å…³ç³»çŸ©é˜µå›¾"><i class="fa fa-check"></i><b>3.3</b> æ•£ç‚¹å›¾çŸ©é˜µä¸å…³ç³»çŸ©é˜µå›¾</a></li>
<li class="chapter" data-level="3.4" data-path="other-advanced-plots.html"><a href="other-advanced-plots.html#é©¬èµ›å…‹å›¾"><i class="fa fa-check"></i><b>3.4</b> é©¬èµ›å…‹å›¾</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>4</b> Maps</a>
<ul>
<li class="chapter" data-level="4.1" data-path="maps.html"><a href="maps.html#mapsåŒ…"><i class="fa fa-check"></i><b>4.1</b> mapsåŒ…</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="maps.html"><a href="maps.html#ä¸–ç•Œåœ°å›¾"><i class="fa fa-check"></i><b>4.1.1</b> ä¸–ç•Œåœ°å›¾</a></li>
<li class="chapter" data-level="4.1.2" data-path="maps.html"><a href="maps.html#ç¾å›½åœ°å›¾"><i class="fa fa-check"></i><b>4.1.2</b> ç¾å›½åœ°å›¾</a></li>
<li class="chapter" data-level="4.1.3" data-path="maps.html"><a href="maps.html#ä¸­å›½åœ°å›¾"><i class="fa fa-check"></i><b>4.1.3</b> ä¸­å›½åœ°å›¾</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="maps.html"><a href="maps.html#remapåŒ…"><i class="fa fa-check"></i><b>4.2</b> REmapåŒ…</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="maps.html"><a href="maps.html#è·å–ç»çº¬åº¦ä¿¡æ¯"><i class="fa fa-check"></i><b>4.2.1</b> è·å–ç»çº¬åº¦ä¿¡æ¯</a></li>
<li class="chapter" data-level="4.2.2" data-path="maps.html"><a href="maps.html#è·å–å„çœå¸‚çš„å¸‚åŒºçº§è¡Œæ”¿å•ä½åç§°"><i class="fa fa-check"></i><b>4.2.2</b> è·å–å„çœï¼ˆå¸‚ï¼‰çš„å¸‚ï¼ˆåŒºï¼‰çº§è¡Œæ”¿å•ä½åç§°</a></li>
<li class="chapter" data-level="4.2.3" data-path="maps.html"><a href="maps.html#åœ°å›¾å¯è§†åŒ–"><i class="fa fa-check"></i><b>4.2.3</b> åœ°å›¾å¯è§†åŒ–</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="plotly.html"><a href="plotly.html"><i class="fa fa-check"></i><b>5</b> Plotly</a>
<ul>
<li class="chapter" data-level="5.1" data-path="plotly.html"><a href="plotly.html#plotlyç®€ä»‹"><i class="fa fa-check"></i><b>5.1</b> Plotlyç®€ä»‹</a></li>
<li class="chapter" data-level="5.2" data-path="plotly.html"><a href="plotly.html#plotlyå·¥ä½œæµ"><i class="fa fa-check"></i><b>5.2</b> Plotlyå·¥ä½œæµ</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="plotly.html"><a href="plotly.html#æ„å»ºplotlyå¯¹è±¡"><i class="fa fa-check"></i><b>5.2.1</b> æ„å»ºplotlyå¯¹è±¡</a></li>
<li class="chapter" data-level="5.2.2" data-path="plotly.html"><a href="plotly.html#æ·»åŠ trace"><i class="fa fa-check"></i><b>5.2.2</b> æ·»åŠ trace</a></li>
<li class="chapter" data-level="5.2.3" data-path="plotly.html"><a href="plotly.html#è·å–æºæ•°æ®"><i class="fa fa-check"></i><b>5.2.3</b> è·å–æºæ•°æ®</a></li>
<li class="chapter" data-level="5.2.4" data-path="plotly.html"><a href="plotly.html#å‘å¸ƒå¯è§†åŒ–ä½œå“"><i class="fa fa-check"></i><b>5.2.4</b> å‘å¸ƒå¯è§†åŒ–ä½œå“</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="plotly.html"><a href="plotly.html#plotlyåŸºç¡€"><i class="fa fa-check"></i><b>5.3</b> PlotlyåŸºç¡€</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="plotly.html"><a href="plotly.html#markers"><i class="fa fa-check"></i><b>5.3.1</b> markers</a></li>
<li class="chapter" data-level="5.3.2" data-path="plotly.html"><a href="plotly.html#lines"><i class="fa fa-check"></i><b>5.3.2</b> Lines</a></li>
<li class="chapter" data-level="5.3.3" data-path="plotly.html"><a href="plotly.html#bars-histograms"><i class="fa fa-check"></i><b>5.3.3</b> Bars &amp; histograms</a></li>
<li class="chapter" data-level="5.3.4" data-path="plotly.html"><a href="plotly.html#boxplots"><i class="fa fa-check"></i><b>5.3.4</b> Boxplots</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="plotly.html"><a href="plotly.html#plotlyè¿›é˜¶"><i class="fa fa-check"></i><b>5.4</b> Plotlyè¿›é˜¶</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="plotly.html"><a href="plotly.html#ggplotly"><i class="fa fa-check"></i><b>5.4.1</b> ggplotly</a></li>
<li class="chapter" data-level="5.4.2" data-path="plotly.html"><a href="plotly.html#layout"><i class="fa fa-check"></i><b>5.4.2</b> layout</a></li>
<li class="chapter" data-level="5.4.3" data-path="plotly.html"><a href="plotly.html#javascript"><i class="fa fa-check"></i><b>5.4.3</b> Javascript</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="visualization-project.html"><a href="visualization-project.html"><i class="fa fa-check"></i><b>6</b> Visualization Project</a>
<ul>
<li class="chapter" data-level="6.1" data-path="visualization-project.html"><a href="visualization-project.html#industry-analysis"><i class="fa fa-check"></i><b>6.1</b> Industry analysis</a></li>
</ul></li>
<li class="divider"></li>
<li><p><a href="https://github.com/TuozhenLiu/Advanced-Visualiztion" target="blank"><svg height="16" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="32" data-view-component="true" class="octicon octicon-mark-github v-align-middle"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a> <a href="https://github.com/TuozhenLiu/Advanced-Visualiztion" target="blank"><strong>&nbsp Source Code</strong></a></p></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">é«˜çº§ç»Ÿè®¡ç»˜å›¾</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="maps" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Maps</h1>
<p>åœ°å›¾æ¯«æ— ç–‘é—®æ˜¯å±•ç¤ºåœ°ç†ä¿¡æ¯æ•°æ®æ—¶æœ€ç›´è§‚çš„å·¥å…·ï¼Œå°¤å…¶æ˜¯å½“åœ°å›¾å’Œç»Ÿè®¡é‡ç»“åˆæ—¶ï¼Œå…¶åŠŸæ•ˆåˆ™ä¼šè¿›ä¸€æ­¥åŠ å¼ºã€‚åœ°ç†ä¿¡æ¯ç³»ç»Ÿ(GIS)å·²ç»æˆä¸ºç ”ç©¶ç©ºé—´å’Œåœ°ç†æ•°æ®çš„çƒ­é—¨å·¥å…·ï¼Œåœ°å›¾çš„åº”ç”¨ä¹Ÿæ˜¯å±¡è§ä¸é²œã€‚åœ°å›¾çš„æœ¬è´¨æ˜¯å¤šè¾¹å½¢ï¼Œè€Œå¤šè¾¹å½¢çš„è¾¹ç•Œåˆ™ç”±åœ°ç†ç»çº¬åº¦æ•°æ®ç¡®å®šã€‚</p>
<div id="mapsåŒ…" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> mapsåŒ…</h2>
<p>Rä¸­çš„é™„åŠ åŒ… maps æ˜¯ç›®å‰æ¯”è¾ƒå®Œå–„çš„åœ°å›¾ç¨‹åºåŒ…ä¹‹ä¸€ï¼ŒmapsåŒ…ä¸­æ ¸å¿ƒçš„å‡½æ•°ä¸º<code>map()</code>ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªä¸»è¦å‚æ•°ä¸ºåœ°å›¾æ•°æ®åº“<strong>database</strong>å’Œåœ°å›¾åŒºåŸŸ<strong>region</strong>ï¼Œåœ°å›¾æ•°æ®åº“ä¸­åŒ…å«äº†æ‰€æœ‰åŒºåŸŸçš„ç»çº¬åº¦æ•°æ®ä»¥åŠç›¸åº”çš„åŒºåŸŸåç§°ï¼Œåœ¨æŒ‡å®šä¸€ä¸ªæ•°æ®åº“å’Œä¸€ç³»åˆ—åŒºåŸŸåç§°ä¹‹åï¼Œè¿™äº›åŒºåŸŸçš„åœ°å›¾ä¾¿å¯ç”±<code>map()</code>ç”Ÿæˆã€‚</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="maps.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span>
<span id="cb37-2"><a href="maps.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">usage</span>(map, <span class="at">w =</span> <span class="fl">0.8</span>)</span>
<span id="cb37-3"><a href="maps.html#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(</span>
<span id="cb37-4"><a href="maps.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">database =</span> <span class="st">&quot;world&quot;</span>, <span class="at">regions =</span> <span class="st">&quot;.&quot;</span>, <span class="at">exact =</span> <span class="cn">FALSE</span>,</span>
<span id="cb37-5"><a href="maps.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">boundary =</span> <span class="cn">TRUE</span>, <span class="at">interior =</span> <span class="cn">TRUE</span>, <span class="at">projection =</span> <span class="st">&quot;&quot;</span>, <span class="at">parameters =</span> <span class="cn">NULL</span>,</span>
<span id="cb37-6"><a href="maps.html#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">orientation =</span> <span class="cn">NULL</span>, <span class="at">fill =</span> <span class="cn">FALSE</span>, <span class="at">col =</span> <span class="dv">1</span>, <span class="at">plot =</span> <span class="cn">TRUE</span>,</span>
<span id="cb37-7"><a href="maps.html#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">add =</span> <span class="cn">FALSE</span>, <span class="at">namesonly =</span> <span class="cn">FALSE</span>, <span class="at">xlim =</span> <span class="cn">NULL</span>, <span class="at">ylim =</span> <span class="cn">NULL</span>,</span>
<span id="cb37-8"><a href="maps.html#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">wrap =</span> <span class="cn">FALSE</span>, <span class="at">resolution =</span> <span class="cf">if</span> (plot) <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span>, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>,</span>
<span id="cb37-9"><a href="maps.html#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">bg =</span> <span class="fu">par</span>(<span class="st">&quot;bg&quot;</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="fl">4.1</span>, <span class="fl">4.1</span>, <span class="fu">par</span>(<span class="st">&quot;mar&quot;</span>)[<span class="dv">3</span>], <span class="fl">0.1</span>),</span>
<span id="cb37-10"><a href="maps.html#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">border =</span> <span class="fl">0.01</span>, ...</span>
<span id="cb37-11"><a href="maps.html#cb37-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div id="ä¸–ç•Œåœ°å›¾" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> ä¸–ç•Œåœ°å›¾</h3>
<p>é€šè¿‡è¿è¡Œå¦‚ä¸‹ä»£ç å¾—åˆ°ä¸–ç•Œåœ°å›¾ã€‚mapsåŒ…é‡Œé¢è¿˜åŒ…æ‹¬äº†ç¾å›½ã€æ–°è¥¿å…°ã€æ„å¤§åˆ©ç­‰å›½çš„åœ°å›¾ã€‚</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="maps.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span>
<span id="cb38-2"><a href="maps.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">family =</span> <span class="st">&quot;STKaiti&quot;</span>)</span>
<span id="cb38-3"><a href="maps.html#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="st">&quot;world&quot;</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="fu">topo.colors</span>(<span class="dv">10</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">60</span>, <span class="dv">90</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb38-4"><a href="maps.html#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;ä¸–ç•Œåœ°å›¾&quot;</span>) <span class="co"># æ·»åŠ æ ‡é¢˜</span></span></code></pre></div>
<p><img src="pre_bookdown_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
</div>
<div id="ç¾å›½åœ°å›¾" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> ç¾å›½åœ°å›¾</h3>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="maps.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="st">&quot;state&quot;</span>,</span>
<span id="cb39-2"><a href="maps.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="fu">heat.colors</span>(<span class="dv">10</span>),</span>
<span id="cb39-3"><a href="maps.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">0</span>)</span>
<span id="cb39-4"><a href="maps.html#cb39-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-5"><a href="maps.html#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">family =</span> <span class="st">&quot;STKaiti&quot;</span>)</span>
<span id="cb39-6"><a href="maps.html#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;ç¾å›½åœ°å›¾&quot;</span>)</span></code></pre></div>
<p><img src="pre_bookdown_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<p>å¯ä»¥æ ¹æ®éœ€è¦ç»˜åˆ¶æŸå›½åœ°å›¾æˆ–è€…ç¾å›½æŸå‡ ä¸ªå·çš„åœ°å›¾ï¼Œåªéœ€åœ¨map()å‡½æ•°ä¸­æ·»åŠ é€‰é¡¹ä¾‹å¦‚<code>region = c('new york', 'new jersey', 'penn')</code> å³å¯ã€‚</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="maps.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="st">&quot;state&quot;</span>,</span>
<span id="cb40-2"><a href="maps.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">region =</span> <span class="fu">c</span>(<span class="st">&quot;new york&quot;</span>, <span class="st">&quot;new jersey&quot;</span>, <span class="st">&quot;penn&quot;</span>),</span>
<span id="cb40-3"><a href="maps.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="fu">terrain.colors</span>(<span class="dv">3</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb40-4"><a href="maps.html#cb40-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-5"><a href="maps.html#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">family =</span> <span class="st">&quot;STKaiti&quot;</span>)</span>
<span id="cb40-6"><a href="maps.html#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;ç¾å›½ä¸‰å·åœ°å›¾&quot;</span>)</span></code></pre></div>
<p><img src="pre_bookdown_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
</div>
<div id="ä¸­å›½åœ°å›¾" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> ä¸­å›½åœ°å›¾</h3>
<p>åœ¨å›½å®¶åŸºç¡€åœ°ç†ä¿¡æ¯ä¸­å¿ƒçš„ç½‘ç«™ä¸Šæä¾›äº†å…è´¹çš„GISæ•°æ®ä¸‹è½½ï¼Œé‡Œé¢åŒ…æ‹¬äº†å›½ç•Œä¸çœç•Œæ•°æ®ï¼Œä½¿ç”¨Rçš„maptoolsåŒ…çš„<code>readShapePoly()</code>æˆ–rgdalåŒ…çš„<code>readOGR()</code>å¯ä»¥è¯»å–shpæ–‡ä»¶ã€‚</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="maps.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maptools)</span>
<span id="cb41-2"><a href="maps.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgdal)</span>
<span id="cb41-3"><a href="maps.html#cb41-3" aria-hidden="true" tabindex="-1"></a>china <span class="ot">&lt;-</span> <span class="fu">readOGR</span>(<span class="st">&quot;china/bou2_4p.shp&quot;</span>)</span>
<span id="cb41-4"><a href="maps.html#cb41-4" aria-hidden="true" tabindex="-1"></a>china<span class="sc">@</span>data<span class="sc">$</span>NAME <span class="ot">&lt;-</span> <span class="fu">iconv</span>(china<span class="sc">@</span>data<span class="sc">$</span>NAME, <span class="st">&quot;GBK&quot;</span>, <span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
<p>è¯¥æ•°æ®åŒ…å«äº†ä¸­å›½925ä¸ªåœ°åŒºçš„çš„é¢ç§¯ã€å‘¨é•¿ã€ç¼–å·ã€è¡Œæ”¿åŒºåç§°ç­‰ä¿¡æ¯ã€‚</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="maps.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(china<span class="sc">@</span>data)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    925 obs. of  7 variables:
##  $ AREA      : num  54.4 129.1 175.6 21.3 15.6 ...
##  $ PERIMETER : num  68.5 129.9 84.9 41.2 38.4 ...
##  $ BOU2_4M_  : chr  &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; ...
##  $ BOU2_4M_ID: chr  &quot;23&quot; &quot;15&quot; &quot;65&quot; &quot;22&quot; ...
##  $ ADCODE93  : int  230000 150000 650000 220000 210000 620000 130000 110000 210000 210000 ...
##  $ ADCODE99  : int  230000 150000 650000 220000 210000 620000 130000 110000 210000 210000 ...
##  $ NAME      : chr  &quot;é»‘é¾™æ±Ÿçœ&quot; &quot;å†…è’™å¤è‡ªæ²»åŒº&quot; &quot;æ–°ç–†ç»´å¾å°”è‡ªæ²»åŒº&quot; &quot;å‰æ—çœ&quot; ...</code></pre>
<p>åœ¨ç»˜åˆ¶åœ°å›¾æ—¶ï¼Œæ¯ä¸€ä¸ªçœå¸‚è‡ªæ²»åŒºæˆ–å²›å±¿éƒ½æ˜¯ç”¨ä¸€ä¸ªå¤šè¾¹å½¢æ¥è¡¨ç¤ºçš„ã€‚GISæ•°æ®æä¾›äº†æ¯ä¸€ä¸ªè¡Œæ”¿åŒºçš„å¤šè¾¹å½¢é€ç‚¹çš„åæ ‡ï¼Œç„¶åRé€šè¿‡é¡ºæ¬¡è¿æ¥è¿™äº›åæ ‡ï¼Œå°±ç»˜åˆ¶å‡ºäº†ä¸€ä¸ªå¤šè¾¹å½¢åŒºåŸŸã€‚</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="maps.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(china)</span>
<span id="cb44-2"><a href="maps.html#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">family =</span> <span class="st">&quot;STKaiti&quot;</span>)</span>
<span id="cb44-3"><a href="maps.html#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;ä¸­å›½åœ°å›¾&quot;</span>)</span></code></pre></div>
<p><img src="pre_bookdown_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<p>plotå‘½ä»¤ä¸­çš„colå‚æ•°åœ¨æœ¬ä¾‹ä¸­åº”è¯¥æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 925 çš„å‘é‡ï¼Œå…¶ç¬¬ i ä¸ªåˆ†é‡çš„å–å€¼å°±ä»£è¡¨äº†åœ°å›¾ä¸­ç¬¬ i ä¸ªå¤šè¾¹å½¢çš„é¢œè‰²ã€‚</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="maps.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(china, <span class="at">col =</span> <span class="fu">gray</span>(<span class="dv">924</span><span class="sc">:</span><span class="dv">0</span> <span class="sc">/</span> <span class="dv">924</span>))</span></code></pre></div>
<p><img src="pre_bookdown_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡æŸ¥æ‰¾ç›¸åº”çš„è¡Œæ”¿åŒºå¯¹åº”çš„è¡Œåå¯¹colå‚æ•°è¿›è¡Œèµ‹å€¼ï¼Œå¯¹ç›¸åº”åœ°åŒºè¿›è¡Œç€è‰²ï¼š</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="maps.html#cb46-1" aria-hidden="true" tabindex="-1"></a>getColor <span class="ot">&lt;-</span> <span class="cf">function</span>(mapdata, provname, provcol, othercol) {</span>
<span id="cb46-2"><a href="maps.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) <span class="fu">ifelse</span>(x <span class="sc">%in%</span> y, <span class="fu">which</span>(y <span class="sc">==</span> x), <span class="dv">0</span>)</span>
<span id="cb46-3"><a href="maps.html#cb46-3" aria-hidden="true" tabindex="-1"></a>  colIndex <span class="ot">&lt;-</span> <span class="fu">sapply</span>(mapdata<span class="sc">@</span>data<span class="sc">$</span>NAME, f, provname)</span>
<span id="cb46-4"><a href="maps.html#cb46-4" aria-hidden="true" tabindex="-1"></a>  col <span class="ot">&lt;-</span> <span class="fu">c</span>(othercol, provcol)[colIndex <span class="sc">+</span> <span class="dv">1</span>]</span>
<span id="cb46-5"><a href="maps.html#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(col)</span>
<span id="cb46-6"><a href="maps.html#cb46-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>å…¶ä¸­<strong>mapdata</strong>æ˜¯å­˜æ”¾åœ°å›¾æ•°æ®çš„å˜é‡ï¼Œ<strong>provname</strong>æ˜¯éœ€è¦æ”¹å˜é¢œè‰²çš„åœ°åŒºçš„åç§°ï¼Œ<strong>provcol</strong>æ˜¯å¯¹åº”äº<strong>provname</strong>çš„ä»£è¡¨é¢œè‰²çš„å‘é‡ï¼Œ<strong>othercol</strong>æ˜¯å…¶å®ƒåœ°åŒºçš„é¢œè‰²ã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="maps.html#cb47-1" aria-hidden="true" tabindex="-1"></a>provname <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;åŒ—äº¬å¸‚&quot;</span>, <span class="st">&quot;ä¸Šæµ·å¸‚&quot;</span>, <span class="st">&quot;é‡åº†å¸‚&quot;</span>, <span class="st">&quot;ç¦å»ºçœ&quot;</span>)</span>
<span id="cb47-2"><a href="maps.html#cb47-2" aria-hidden="true" tabindex="-1"></a>provcol <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;purple&quot;</span>)</span>
<span id="cb47-3"><a href="maps.html#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(china, <span class="at">col =</span> <span class="fu">getColor</span>(china, provname, provcol, <span class="st">&quot;white&quot;</span>))</span></code></pre></div>
<p><img src="pre_bookdown_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<p>åˆ©ç”¨ç±»ä¼¼çš„æ–¹æ³•å°±å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦å¯¹ä¸åŒçš„åŒºåŸŸè¿›è¡Œç€è‰²ã€‚ä»å›½å®¶ç»Ÿè®¡å±€è·å–æˆ‘å›½å„åœ°åŒºçš„äººå£æ•°æ®ï¼Œç„¶åæ ¹æ®äººå£çš„å¤šå°‘å¯¹å„çœä»½è¿›è¡Œç€è‰²ã€‚</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="maps.html#cb48-1" aria-hidden="true" tabindex="-1"></a>data_population <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/population.csv&quot;</span>)</span>
<span id="cb48-2"><a href="maps.html#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data_population[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>])</span></code></pre></div>
<pre><code>##       provname  pop
## 1       åŒ—äº¬å¸‚ 1633
## 2       å¤©æ´¥å¸‚ 1115
## 3       æ²³åŒ—çœ 6943
## 4       å±±è¥¿çœ 3393
## 5 å†…è’™å¤è‡ªæ²»åŒº 2405
## 6       è¾½å®çœ 4298</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="maps.html#cb50-1" aria-hidden="true" tabindex="-1"></a>provname <span class="ot">&lt;-</span> data_population<span class="sc">$</span>provname</span>
<span id="cb50-2"><a href="maps.html#cb50-2" aria-hidden="true" tabindex="-1"></a>pop <span class="ot">&lt;-</span> data_population<span class="sc">$</span>pop</span>
<span id="cb50-3"><a href="maps.html#cb50-3" aria-hidden="true" tabindex="-1"></a>provcol <span class="ot">&lt;-</span> <span class="fu">rgb</span>(<span class="at">red =</span> <span class="dv">1</span> <span class="sc">-</span> pop <span class="sc">/</span> <span class="fu">max</span>(pop) <span class="sc">/</span> <span class="dv">2</span>, <span class="at">green =</span> <span class="dv">1</span> <span class="sc">-</span> pop <span class="sc">/</span> <span class="fu">max</span>(pop) <span class="sc">/</span> <span class="dv">2</span>, <span class="at">blue =</span> <span class="dv">0</span>)</span>
<span id="cb50-4"><a href="maps.html#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(china, <span class="at">col =</span> <span class="fu">getColor</span>(china, provname, provcol, <span class="st">&quot;white&quot;</span>), <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="pre_bookdown_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥åˆ©ç”¨è¿™ä¸ªå‚æ•°ç”»å‡ºå›½å†…æŸä¸€éƒ¨åˆ†çš„åœ°å›¾ï¼Œä¾‹å¦‚ç»˜åˆ¶ç¦å»ºã€æµ™æ±Ÿã€æ±Ÿè¥¿å’Œå¹¿ä¸œå››ä¸ªä¸œå—åœ°åŒºçœä»½çš„åœ°å›¾å¦‚ä¸‹ï¼š</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="maps.html#cb51-1" aria-hidden="true" tabindex="-1"></a>southeast <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ç¦å»ºçœ&quot;</span>, <span class="st">&quot;æµ™æ±Ÿçœ&quot;</span>, <span class="st">&quot;æ±Ÿè¥¿çœ&quot;</span>, <span class="st">&quot;å¹¿ä¸œçœ&quot;</span>)</span>
<span id="cb51-2"><a href="maps.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(china,</span>
<span id="cb51-3"><a href="maps.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="fu">getColor</span>(china, southeast, <span class="fu">rep</span>(<span class="st">&quot;blue&quot;</span>, <span class="dv">4</span>), <span class="st">&quot;white&quot;</span>), <span class="at">border =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb51-4"><a href="maps.html#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb51-5"><a href="maps.html#cb51-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="pre_bookdown_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
<p>è¿˜å¯ä»¥äººå·¥å°†å„çœä¼šçš„ä¿¡æ¯åœ¨åœ°å›¾ä¸Šæ ‡è®°å‡ºæ¥</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="maps.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>))</span>
<span id="cb52-2"><a href="maps.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">family =</span> <span class="st">&quot;STKaiti&quot;</span>)</span>
<span id="cb52-3"><a href="maps.html#cb52-3" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/city.csv&quot;</span>)</span>
<span id="cb52-4"><a href="maps.html#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(china, <span class="at">col =</span> <span class="st">&quot;lightgray&quot;</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">54</span>), <span class="at">panel.first =</span> <span class="fu">grid</span>())</span>
<span id="cb52-5"><a href="maps.html#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(dat<span class="sc">$</span>jd, dat<span class="sc">$</span>wd, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), <span class="at">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb52-6"><a href="maps.html#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(dat<span class="sc">$</span>jd, dat<span class="sc">$</span>wd, dat[, <span class="dv">2</span>],</span>
<span id="cb52-7"><a href="maps.html#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">cex =</span> <span class="fl">0.7</span>, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.7</span>),</span>
<span id="cb52-8"><a href="maps.html#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">pos =</span> <span class="fu">c</span>(</span>
<span id="cb52-9"><a href="maps.html#cb52-9" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">2</span>,</span>
<span id="cb52-10"><a href="maps.html#cb52-10" aria-hidden="true" tabindex="-1"></a>    <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">2</span></span>
<span id="cb52-11"><a href="maps.html#cb52-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb52-12"><a href="maps.html#cb52-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-13"><a href="maps.html#cb52-13" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">lwd =</span> <span class="dv">0</span>)</span>
<span id="cb52-14"><a href="maps.html#cb52-14" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">0</span>)</span>
<span id="cb52-15"><a href="maps.html#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">3</span>, <span class="at">lwd =</span> <span class="dv">0</span>)</span>
<span id="cb52-16"><a href="maps.html#cb52-16" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">4</span>, <span class="at">lwd =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="pre_bookdown_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
</div>
</div>
<div id="remapåŒ…" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> REmapåŒ…</h2>
<p>REmapæ˜¯ä¸€ä¸ªåŸºäºEchartsçš„Rè¯­è¨€ç¨‹åºåŒ…ï¼Œä¸ºä½¿ç”¨è€…æä¾›äº†ä¸€ä¸ªç®€ä¾¿çš„ã€å¯äº¤äº’çš„åœ°å›¾æ•°æ®å¯è§†åŒ–å·¥å…·ã€‚ç”±äºREmapç›®å‰æ‰˜ç®¡åœ¨GitHubä¸Š,éœ€è¦ä½¿ç”¨devtoolsåŒ…ä¸‹è½½ã€‚</p>
<pre class="{.{rï¼Œeval=false}}"><code>install.packages(&#39;devtools&#39;)
library(devtools)
install_github(&#39;lchiffon/REmap&#39;)</code></pre>
<div id="è·å–ç»çº¬åº¦ä¿¡æ¯" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> è·å–ç»çº¬åº¦ä¿¡æ¯</h3>
<p>REmapæ˜¯åŸºäºç™¾åº¦åœ°å›¾æ„å»ºçš„ï¼Œå› æ­¤éœ€è¦åœ¨ç™¾åº¦åœ°å›¾å¼€æ”¾å¹³å°åˆ›å»ºé¡¹ç›®è·å–AKï¼Œé…ç½®åˆ°REmapä¸­ã€‚</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="maps.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(REmap)</span>
<span id="cb54-2"><a href="maps.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">remap.ak =</span> <span class="st">&quot;ZAIIlGEpPKoBVF5M4GLEuN6G5T6AQpCn&quot;</span>) <span class="co"># é…ç½®ç™¾åº¦åœ°å›¾API</span></span>
<span id="cb54-3"><a href="maps.html#cb54-3" aria-hidden="true" tabindex="-1"></a>place <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ä¸­å¤®è´¢ç»å¤§å­¦å­¦é™¢å—è·¯æ ¡åŒº&quot;</span>, <span class="st">&quot;ä¸­å¤®è´¢ç»å¤§å­¦æ²™æ²³æ ¡åŒº&quot;</span>)</span>
<span id="cb54-4"><a href="maps.html#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="fu">get_geo_position</span>(place)</span></code></pre></div>
<pre><code>##        lon      lat                     city
## 1 116.3492 39.96521 ä¸­å¤®è´¢ç»å¤§å­¦å­¦é™¢å—è·¯æ ¡åŒº
## 2 116.2883 40.17780     ä¸­å¤®è´¢ç»å¤§å­¦æ²™æ²³æ ¡åŒº</code></pre>
</div>
<div id="è·å–å„çœå¸‚çš„å¸‚åŒºçº§è¡Œæ”¿å•ä½åç§°" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> è·å–å„çœï¼ˆå¸‚ï¼‰çš„å¸‚ï¼ˆåŒºï¼‰çº§è¡Œæ”¿å•ä½åç§°</h3>
<p>é—®ï¼šåŒ—äº¬å¸‚ç©¶ç«Ÿä¸‹è¾–å“ªå‡ ä¸ªåŒºå‘¢ï¼Ÿ</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="maps.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapNames</span>(<span class="st">&quot;åŒ—äº¬&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;å¯†äº‘å¿&quot;   &quot;æ€€æŸ”åŒº&quot;   &quot;æˆ¿å±±åŒº&quot;   &quot;å»¶åº†å¿&quot;   &quot;é—¨å¤´æ²ŸåŒº&quot; &quot;æ˜Œå¹³åŒº&quot;  
##  [7] &quot;å¤§å…´åŒº&quot;   &quot;é¡ºä¹‰åŒº&quot;   &quot;å¹³è°·åŒº&quot;   &quot;é€šå·åŒº&quot;   &quot;æœé˜³åŒº&quot;   &quot;æµ·æ·€åŒº&quot;  
## [13] &quot;ä¸°å°åŒº&quot;   &quot;çŸ³æ™¯å±±åŒº&quot; &quot;è¥¿åŸåŒº&quot;   &quot;ä¸œåŸåŒº&quot;   &quot;å®£æ­¦åŒº&quot;   &quot;å´‡æ–‡åŒº&quot;</code></pre>
</div>
<div id="åœ°å›¾å¯è§†åŒ–" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> åœ°å›¾å¯è§†åŒ–</h3>
<div id="remapå‡½æ•°ç»˜åˆ¶èˆªè¿¹å›¾" class="section level4" number="4.2.3.1">
<h4><span class="header-section-number">4.2.3.1</span> remapå‡½æ•°ç»˜åˆ¶èˆªè¿¹å›¾</h4>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="maps.html#cb58-1" aria-hidden="true" tabindex="-1"></a>origin <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;åŒ—äº¬&quot;</span>, <span class="dv">10</span>)</span>
<span id="cb58-2"><a href="maps.html#cb58-2" aria-hidden="true" tabindex="-1"></a>destination <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb58-3"><a href="maps.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;ä¸Šæµ·&quot;</span>, <span class="st">&quot;å¹¿å·&quot;</span>, <span class="st">&quot;å¤§è¿&quot;</span>, <span class="st">&quot;å—å®&quot;</span>, <span class="st">&quot;å—æ˜Œ&quot;</span>,</span>
<span id="cb58-4"><a href="maps.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;æ‹‰è¨&quot;</span>, <span class="st">&quot;é•¿æ˜¥&quot;</span>, <span class="st">&quot;åŒ…å¤´&quot;</span>, <span class="st">&quot;é‡åº†&quot;</span>, <span class="st">&quot;å¸¸å·&quot;</span></span>
<span id="cb58-5"><a href="maps.html#cb58-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb58-6"><a href="maps.html#cb58-6" aria-hidden="true" tabindex="-1"></a>flight <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(origin, destination)</span>
<span id="cb58-7"><a href="maps.html#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="fu">remap</span>(flight, <span class="at">title =</span> <span class="st">&quot;èˆªè¿¹å›¾&quot;</span>, <span class="at">theme =</span> <span class="fu">get_theme</span>(<span class="st">&quot;Dark&quot;</span>))</span></code></pre></div>
<script src="./js/echarts.js"></script>
<script src = "./js/echarts-all.js"></script>
<div id="remap" style="width: 700px; height:466px;"></div>
<script>
  var myChart = echarts.init(document.getElementById("remap"));

  var option = 
{
  backgroundColor: '#1b1b1b',
  color: ['gold','aqua','lime'],
  title : {
  text: 'REmapå®ä¾‹æ•°æ®',
  subtext:'theme:Dark',
  x:'center',
  textStyle : {
  color: '#fff'
  }
  },
  tooltip : {
  trigger: 'item',
  formatter: '{b}'
  },
  toolbox: {
  show : true,
  orient : 'vertical',
  x: 'right',
  y: 'center',
  feature : {
  mark : {show: true},
  dataView : {show: true, readOnly: false},
  restore : {show: true},
  saveAsImage : {show: true}
  }
  },
  dataRange: {
  min : 0,
  show: false,
  max : 100,
  y: '60%',
  calculable : true,
  color: ['#ff3333', 'orange', 'yellow','lime','aqua']
  },

  series : [
  {
  type:'map',
  itemStyle:{
  normal:{
  borderColor:'rgba(100,149,237,1)',
  borderWidth: 0.5,
  areaStyle:{
  color: '#1b1b1b'
  }
  }
  },
  data:[],
  geoCoord: {'åŒ—äº¬': [116.413554,39.911013],
'ä¸Šæµ·': [121.480237,31.236305],
'å¹¿å·': [113.270793,23.135308],
'å¤§è¿': [121.621391,38.919345],
'å—å®': [108.373351,22.823037],
'å—æ˜Œ': [115.864528,28.687675],
'æ‹‰è¨': [91.121025,29.650088],
'é•¿æ˜¥': [125.33017,43.82178],
'åŒ…å¤´': [109.846755,40.663636],
'é‡åº†': [106.557165,29.570997],
'å¸¸å·': [119.58,31.47]},

  markLine : {
  smooth:true,
  effect : {
  show: true,
  scaleSize: 1,
  period: 30,
  color: '#fff',
  shadowBlur: 10
  },
  itemStyle : {
  color: 'red',
  normal: {
  borderWidth:1,
  lineStyle: {
  type: 'solid',
  shadowBlur: 10
  },
  label:{show:false}
  }
  },

  data : [
  [{name:'åŒ—äº¬'}, {name:'ä¸Šæµ·',value: 90}],
[{name:'åŒ—äº¬'}, {name:'å¹¿å·',value: 70}],
[{name:'åŒ—äº¬'}, {name:'å¤§è¿',value: 70}],
[{name:'åŒ—äº¬'}, {name:'å—å®',value: 20}],
[{name:'åŒ—äº¬'}, {name:'å—æ˜Œ',value: 80}],
[{name:'åŒ—äº¬'}, {name:'æ‹‰è¨',value: 80}],
[{name:'åŒ—äº¬'}, {name:'é•¿æ˜¥',value: 20}],
[{name:'åŒ—äº¬'}, {name:'åŒ…å¤´',value: 30}],
[{name:'åŒ—äº¬'}, {name:'é‡åº†',value: 20}],
[{name:'åŒ—äº¬'}, {name:'å¸¸å·',value:100}]
  ]
  },
  markPoint : {
  symbol:'emptyCircle',
  symbolSize : function (v){
  return 10 + v/10
  },
  effect : {
  show: true,
  shadowBlur : 0
  },
  itemStyle:{
  normal:{
  label:{show:true}
  }
  },
  data : [
  {name:'ä¸Šæµ·',value: 90},
{name:'å¹¿å·',value: 70},
{name:'å¤§è¿',value: 70},
{name:'å—å®',value: 20},
{name:'å—æ˜Œ',value: 80},
{name:'æ‹‰è¨',value: 80},
{name:'é•¿æ˜¥',value: 20},
{name:'åŒ…å¤´',value: 30},
{name:'é‡åº†',value: 20},
{name:'å¸¸å·',value:100}
  ]
  }
  }
  ]
  }
;
myChart.setOption(option);
</script>
<p>å›¾ä¸­çš„é¢œè‰²å¯ä»¥é€šè¿‡<code>get_theme()</code>æ¥è®¾ç½®ï¼Œå‡ ä¸ªå¸¸ç”¨çš„å‚æ•°ï¼š<br />
</p>
<p><strong>Theme:theme</strong>æ˜¯æ€»ä½“é…è‰²é€‰é¡¹ï¼Œå…±æœ‰â€™Darkâ€™,â€˜Brightâ€™,â€˜Skyâ€™,â€˜Noneâ€™å››ç§é€‰é¡¹ã€‚é€‰å®šè¯¥é€‰é¡¹ï¼ˆé™¤â€™Noneâ€™å¤–ï¼‰åï¼Œå…¶å®ƒå‚æ•°æ— éœ€å†è®¾ç½®ã€‚<br />
<strong>lineColor</strong>: lineColorä¸ºçº¿æ¡é¢œè‰²ï¼Œé»˜è®¤æ˜¯éšæœºï¼Œä¹Ÿå¯è‡ªè¡Œè®¾ç½®ï¼Œå¦‚â€™redâ€™ã€‚<br />
<strong>BackgroundColor</strong>:åœ°å›¾å¤–èƒŒæ™¯é¢œè‰²<br />
<strong>RegionColor</strong>:åœ°å›¾ä¸­å„åŒºåŸŸé¢œè‰²</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="maps.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_theme</span>(</span>
<span id="cb59-2"><a href="maps.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">theme =</span> <span class="st">&quot;Dark&quot;</span>,</span>
<span id="cb59-3"><a href="maps.html#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">lineColor =</span> <span class="st">&quot;Random&quot;</span>,</span>
<span id="cb59-4"><a href="maps.html#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">backgroundColor =</span> <span class="st">&quot;#1b1b1b&quot;</span>,</span>
<span id="cb59-5"><a href="maps.html#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">titleColor =</span> <span class="st">&quot;#fff&quot;</span>,</span>
<span id="cb59-6"><a href="maps.html#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">borderColor =</span> <span class="st">&quot;rgba(100,149,237,1)&quot;</span>,</span>
<span id="cb59-7"><a href="maps.html#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">regionColor =</span> <span class="st">&quot;#1b1b1b&quot;</span>,</span>
<span id="cb59-8"><a href="maps.html#cb59-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">labelShow =</span> T,</span>
<span id="cb59-9"><a href="maps.html#cb59-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">pointShow =</span> F,</span>
<span id="cb59-10"><a href="maps.html#cb59-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">pointColor =</span> <span class="st">&quot;gold&quot;</span></span>
<span id="cb59-11"><a href="maps.html#cb59-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>ä¾‹å¦‚å°†é¢œè‰²æ”¹ä¸ºäº®è‰²ï¼š</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="maps.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">remap</span>(flight, <span class="at">title =</span> <span class="st">&quot;äº®è‰²èˆªè¿¹å›¾&quot;</span>, <span class="at">theme =</span> <span class="fu">get_theme</span>(<span class="st">&quot;Bright&quot;</span>))</span></code></pre></div>
<div id="main2" style="width: 700px; height:466px;"></div>
  <script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
  <script src = "http://echarts.baidu.com/build/dist/echarts-all.js"></script>
  <script>
  var myChart = echarts.init(document.getElementById("main2"));

  var optionID_20211223000944_48477 = 
{
  backgroundColor: '#D9D9D9',
  color: ['gold','aqua','lime'],
  title : {
  text: 'äº®è‰²èˆªè¿¹å›¾',
  subtext:'',
  x:'center',
  textStyle : {
  color: '#1b1b1b'
  }
  },
  tooltip : {
  trigger: 'item',
  formatter: '{b}'
  },
  toolbox: {
  show : true,
  orient : 'vertical',
  x: 'right',
  y: 'center',
  feature : {
  mark : {show: true},
  dataView : {show: true, readOnly: false},
  restore : {show: true},
  saveAsImage : {show: true}
  }
  },
  dataRange: {
  min : 0,
  show: false,
  max : 100,
  y: '60%',
  calculable : true,
  color: ['#ff3333', 'orange', 'yellow','lime','aqua']
  },

  series : [
  {
  type:'map',
  itemStyle:{
  normal:{
  borderColor:'rgba(100,149,237,1)',
  borderWidth: 0.5,
  areaStyle:{
  color: '#fff'
  }
  }
  },
  data:[],
  geoCoord: {'åŒ—äº¬': [116.413554,39.911013],
'ä¸Šæµ·': [121.480237,31.236305],
'å¹¿å·': [113.270793,23.135308],
'å¤§è¿': [121.621391,38.919345],
'å—å®': [108.373351,22.823037],
'å—æ˜Œ': [115.864528,28.687675],
'æ‹‰è¨': [91.121025,29.650088],
'é•¿æ˜¥': [125.33017,43.82178],
'åŒ…å¤´': [109.846755,40.663636],
'é‡åº†': [106.557165,29.570997],
'å¸¸å·': [119.58,31.47]},

  markLine : {
  smooth:true,
  effect : {
  show: true,
  scaleSize: 1,
  period: 30,
  color: '#fff',
  shadowBlur: 10
  },
  itemStyle : {
  color: 'red',
  normal: {
  borderWidth:1,
  lineStyle: {
  type: 'solid',
  shadowBlur: 10
  },
  label:{show:false}
  }
  },

  data : [
  [{name:'åŒ—äº¬'}, {name:'ä¸Šæµ·',value: 10}],
[{name:'åŒ—äº¬'}, {name:'å¹¿å·',value: 50}],
[{name:'åŒ—äº¬'}, {name:'å¤§è¿',value: 10}],
[{name:'åŒ—äº¬'}, {name:'å—å®',value: 90}],
[{name:'åŒ—äº¬'}, {name:'å—æ˜Œ',value:100}],
[{name:'åŒ—äº¬'}, {name:'æ‹‰è¨',value: 80}],
[{name:'åŒ—äº¬'}, {name:'é•¿æ˜¥',value: 50}],
[{name:'åŒ—äº¬'}, {name:'åŒ…å¤´',value: 80}],
[{name:'åŒ—äº¬'}, {name:'é‡åº†',value:  0}],
[{name:'åŒ—äº¬'}, {name:'å¸¸å·',value:100}]
  ]
  },
  markPoint : {
  symbol:'emptyCircle',
  symbolSize : function (v){
  return 10 + v/10
  },
  effect : {
  show: true,
  shadowBlur : 0
  },
  itemStyle:{
  normal:{
  label:{show:true}
  }
  },
  data : [
  {name:'ä¸Šæµ·',value: 10},
{name:'å¹¿å·',value: 50},
{name:'å¤§è¿',value: 10},
{name:'å—å®',value: 90},
{name:'å—æ˜Œ',value:100},
{name:'æ‹‰è¨',value: 80},
{name:'é•¿æ˜¥',value: 50},
{name:'åŒ…å¤´',value: 80},
{name:'é‡åº†',value:  0},
{name:'å¸¸å·',value:100}
  ]
  }
  }
  ]
  }
;
  myChart.setOption(optionID_20211223000944_48477);
  </script>
</div>
<div id="remaphç»˜åˆ¶çƒ­åŠ›æ•ˆæœå›¾" class="section level4" number="4.2.3.2">
<h4><span class="header-section-number">4.2.3.2</span> remapHç»˜åˆ¶çƒ­åŠ›æ•ˆæœå›¾</h4>
<p>è¿™ä¸ªå‡½æ•°çš„ç‰¹ç‚¹æ˜¯å¯ä»¥åšä¸­å¿ƒè¾å°„çš„çƒ­åŠ›å›¾ï¼Œè¿™ç§çƒ­åŠ›å›¾åœ¨æ°”è±¡ã€äººå£å¯†åº¦ã€æµ·æ‹”æµ‹ç»˜é¢†åŸŸæœ‰è¯¸å¤šè¿ç”¨ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸Šå½“ç”¨åœ¨å•†åŠ¡åœºåˆâ€”â€”ç‰¹åˆ«æ˜¯è·Ÿåœ°ç†ä¿¡æ¯æœ‰å…³çš„æ•°æ®å‘ˆç°æ–¹é¢ã€‚<br />
<code>remapH()</code>çš„å„å‚æ•°å¦‚ä¸‹ï¼š</p>
<pre class="{.{rï¼Œeval=false}}"><code>remapH(data,
       maptype = &#39;china&#39;,
       theme = get_theme(&quot;Dark&quot;),
       blurSize = 30,
       color = c(&#39;blue&#39;),
       minAlpha = 0.05,
       opacity = 1,
           )</code></pre>
<p><strong>data</strong>ä¸ºè¦ä¼ å…¥çš„æ•°æ®ï¼Œæ•°æ®ä¸ºä¸‰åˆ—ï¼Œç¬¬ä¸€åˆ—ä¸ºlon(ç»åº¦)ï¼Œç¬¬äºŒåˆ—ä¸ºlat(ç»´åº¦)ï¼Œç¬¬ä¸‰åˆ—ä¸ºprob(å¯†åº¦/æ¦‚ç‡)<br />
<strong>maptype</strong>ä¸ºè¦ç»˜åˆ¶çš„åœ°å›¾ç±»å‹ï¼Œå¯é€‰æœ‰ï¼šâ€œchinaâ€ï¼Œâ€œworldâ€æˆ–ä¸­å›½å„çœä»½åå­—<br />
<strong>theme</strong>ä¸ºç»˜åˆ¶çš„åœ°å›¾ä¸»é¢˜ç±»å‹ï¼Œå¯ç”±get_themeå‡½æ•°ä¼ å…¥ï¼Œget_themeåœ¨ä¸‹é¢ä¼šè¯¦è§£<br />
<strong>blurSize</strong>ä¸ºçƒ­åŠ›æ•ˆæœçš„æ³›åŒ–èŒƒå›´ï¼Œå¯è°ƒæ•´çƒ­åŠ›ç‚¹ä¸­å¿ƒçš„æ‰©æ•£ç¨‹åº¦<br />
<strong>color</strong>ä¸ºçƒ­åŠ›çš„æ¸å˜é¢œè‰²<br />
<strong>minAlpha</strong>ä¸ºçƒ­åŠ›ç‚¹çš„å±•ç¤ºé˜ˆå€¼ï¼Œå¯¹åº”dataä¸­çš„probåˆ—ï¼Œä½œå›¾æ—¶å„ç‚¹å¯†åº¦ä¼šå¯¹æ¯”minAlphaï¼Œä»¥å‡¸æ˜¾ä¸åŒå¯†åº¦æ‰€å±•ç¤ºçš„ä¸åŒçƒ­åŠ›åˆ†å¸ƒ<br />
<strong>opacity</strong>ä¸ºé€æ˜åº¦ï¼Œè°ƒæ•´çƒ­åŠ›å›¾çš„é€æ˜åº¦</p>
<p>è·å–200ä¸ªåŸå¸‚çš„PM2.5æŒ‡æ•°åŠç»çº¬åº¦ï¼Œç»˜åˆ¶çƒ­åŠ›å›¾å¦‚ä¸‹ï¼š</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="maps.html#cb62-1" aria-hidden="true" tabindex="-1"></a>air <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">&quot;data/air.csv&quot;</span>, <span class="at">header =</span> T)</span>
<span id="cb62-2"><a href="maps.html#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(air)</span></code></pre></div>
<pre><code>##        lon      lat avg_pm2_5
## 1 121.3857 41.05955 0.3618444
## 2 113.4990 22.28592 0.1763897
## 3 119.9574 36.78975 0.3056141
## 4 114.9962 30.20217 0.3327429
## 5 117.5387 36.70130 0.4373493
## 6 129.0924 47.97323 0.1041234</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="maps.html#cb64-1" aria-hidden="true" tabindex="-1"></a>theme1 <span class="ot">&lt;-</span> <span class="fu">get_theme</span>(</span>
<span id="cb64-2"><a href="maps.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">theme =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb64-3"><a href="maps.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">lineColor =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb64-4"><a href="maps.html#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">backgroundColor =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb64-5"><a href="maps.html#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">titleColor =</span> <span class="st">&quot;#fff&quot;</span>,</span>
<span id="cb64-6"><a href="maps.html#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">borderColor =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb64-7"><a href="maps.html#cb64-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">regionColor =</span> <span class="st">&quot;grey&quot;</span>,</span>
<span id="cb64-8"><a href="maps.html#cb64-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">labelShow =</span> T,</span>
<span id="cb64-9"><a href="maps.html#cb64-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">pointShow =</span> F,</span>
<span id="cb64-10"><a href="maps.html#cb64-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">pointColor =</span> <span class="st">&quot;gold&quot;</span></span>
<span id="cb64-11"><a href="maps.html#cb64-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb64-12"><a href="maps.html#cb64-12" aria-hidden="true" tabindex="-1"></a><span class="fu">remapH</span>(air,</span>
<span id="cb64-13"><a href="maps.html#cb64-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">maptype =</span> <span class="st">&quot;china&quot;</span>,</span>
<span id="cb64-14"><a href="maps.html#cb64-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">theme =</span> theme1,</span>
<span id="cb64-15"><a href="maps.html#cb64-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">blurSize =</span> <span class="dv">35</span>,</span>
<span id="cb64-16"><a href="maps.html#cb64-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb64-17"><a href="maps.html#cb64-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">minAlpha =</span> <span class="fl">0.3</span>,</span>
<span id="cb64-18"><a href="maps.html#cb64-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">opacity =</span> <span class="dv">1</span>,</span>
<span id="cb64-19"><a href="maps.html#cb64-19" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div id="main3" style="width: 700px; height:466px;"></div>
  <script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
  <script src = "http://echarts.baidu.com/build/dist/echarts-all.js"></script>
  <script>
  var myChart = echarts.init(document.getElementById("main3"));

  var heatData = [[121.3856774,41.05954614,0.361844359],
[113.499,22.285925,0.176389739],
[119.957365,36.78975,0.305614096],
[114.9962023,30.20217391,0.332742944],
[117.5387,36.7013,0.437349314],
[129.0924,47.97323333,0.10412342],
[116.7973,33.94026667,0.493282954],
[118.3739583,31.36784725,0.405229683],
[111.1328778,37.5149,0.426686722],
[125.94235,41.72685,0.195418195],
[114.0090185,32.98931481,0.510218519],
[111.47422,27.25482,0.3523319],
[106.7017971,26.55266858,0.217918015],
[110.4822747,29.22293975,0.211735979],
[91.7657,29.24615,0.015605062],
[117.4857,30.65853333,0.361189831],
[120.2750333,31.91430667,0.427108525],
[117.702063,36.2182926,0.592356608],
[109.97888,27.55854,0.249500856],
[103.21015,35.6018,0.365401998],
[103.7602,29.5738,0.368273556],
[114.4002111,36.08646667,0.646696818],
[119.9036111,32.43243056,0.394203963],
[109.4273055,24.32704618,0.314673914],
[114.8956,40.817,0.231101555],
[97,33.0014,0.06942812],
[114.92238,25.86134,0.288262013],
[111.2757,23.46215,0.276868645],
[115.3611667,38.786875,0.552973157],
[112.20255,31.0275086,0.469695419],
[118.3399451,35.05247506,0.420285044],
[114.8966278,30.4619111,0.319583177],
[102.2125,31.90816667,0.034588326],
[92.0581,31.47895,0.221676099],
[116.6398084,25.67351995,0.236646553],
[126.6518092,45.74024885,0.304476193],
[107.35885,22.39225,0.220608119],
[105.8648333,34.49786667,0.269653646],
[104.6405,30.133,0.275700127],
[94.36485,29.6504,0],
[122.83275,45.6232,0.192125774],
[106.1848295,37.97544487,0.295655776],
[112.5159,37.8505625,0.470051491],
[123.0427028,41.11737633,0.275557485],
[116.0003323,29.67551289,0.306589626],
[100.9048,36.9639,0.153774963],
[100.2281,26.87613333,0.073216344],
[102.9064746,35.0015277,0.210931686],
[118.8656667,28.96043333,0.239980557],
[113.8148148,34.01277778,0.547267454],
[116.72725,39.54475,0.427514772],
[107.52278,26.24056,0.16512164],
[124.12445,50.4243,0.091976458],
[120.8591732,40.7408054,0.322997957],
[122.207,29.99016667,0.131600691],
[99.16945,25.12045,0.126209664],
[102.27516,27.8656,0.120921112],
[94.45790667,29.73098667,0.540262298],
[104.1731,36.54695,0.284735718],
[117.127718,36.189343,0.429389218],
[103.85665,30.067125,0.277789072],
[104.61985,35.58445,0.313172542],
[114.3783,27.79756,0.298866361],
[98.85735,25.8492,0.155381126],
[115.0403889,35.76605556,0.552190411],
[89.1673,42.9559,0.462690952],
[115.6554861,34.41665278,0.533388119],
[108.321375,22.8033,0.240100229],
[105.8491,32.437375,0.176404618],
[106.1539667,38.503855,0.301294091],
[120.0845834,29.3201639,0.256681058],
[118.4607933,24.76495925,0.157219401],
[120.0172643,36.26762435,0.332289661],
[113.3925,22.5164,0.196285147],
[104.891665,25.095835,0.056801813],
[79.9301,37.10825,1],
[125.14625,42.895,0.252253768],
[122.4209,37.161475,0.143867451],
[104.86438,26.58296,0.237888976],
[102.1086,36.4997,0.347234708],
[121.53885,36.9214,0.143116394],
[114.2511111,35.79453704,0.467080849],
[119.6068,39.9362,0.291492791],
[113.151641,29.3886245,0.347637607],
[118.76175,36.86375,0.445101988],
[118.1165417,24.5639,0.151160678],
[113.3507659,23.18525019,0.250253646],
[106.2536196,36.0493382,0.257984263],
[115.4553147,35.25411733,0.513913283],
[110.37,20.00918,0.082555733],
[120.8715,31.99383333,0.320833038],
[122.0792726,37.49314812,0.180827834],
[97.3731,37.3753,0.129142687],
[116.9708459,33.63858378,0.488180577],
[113.0516005,23.67654793,0.276793275],
[118.183,39.64516667,0.512332589],
[103.005325,29.99185,0.328914275],
[123.2053014,41.24151322,0.270132052],
[91.79549474,29.46273684,0.383791714],
[111.9622547,21.857164,0.211492658],
[119.4238095,32.39417506,0.39654542],
[118.155875,26.64825,0.125757928],
[120.453895,36.38699,0.250059343],
[124.3675667,43.17293333,0.295293928],
[117.3568167,32.92925,0.445885318],
[113.6533408,34.77363367,0.564116459],
[106.5097068,29.59513735,0.285872145],
[104.2426,23.3743,0.168501922],
[121.1650664,31.89429563,0.253545742],
[105.5761,30.52185,0.270561716],
[110.1404667,22.65313333,0.268762437],
[130.97095,45.2975,0.215436921],
[120.0819091,30.21117273,0.28973021],
[119.7066667,30.23430555,0.274601563],
[122.0361,37.19165,0.147223292],
[120.739535,31.65705,0.364421664],
[123.4613451,41.80196455,0.287448846],
[113.0655,22.9843,0.246468412],
[106.0862167,30.80306667,0.36298517],
[111.1724167,34.78828611,0.482253404],
[113.5925554,24.7721666,0.25944703],
[112.3611,28.59404,0.252660897],
[100.45915,38.9428,0.27919011],
[115.8247,32.8797,0.454202198],
[117.0201,25.079525,0.170155863],
[119.16638,31.95072,0.426827949],
[86.0597,44.3021,0.532503548],
[119.6621,29.09756667,0.250581608],
[120.6516067,31.16692333,0.302864933],
[119.810115,31.35882,0.348610425],
[105.1250212,37.32008363,0.285641514],
[113.1619833,27.86096171,0.339044551],
[110.2997222,25.25290278,0.277536222],
[113.3779518,31.71665553,0.345546326],
[111.5095196,36.072762,0.579169637],
[119.9675,37.19,0.244320578],
[126.5600317,43.855992,0.259225011],
[106.68655,35.53775,0.27535515],
[120.3038766,31.55509637,0.32642495],
[114.6569792,33.61469445,0.503702118],
[112.48375,23.090925,0.274931376],
[121.6275,29.8703625,0.234274148],
[120.402525,37.370045,0.238332432],
[124.9233334,46.4433332,0.182208345],
[117.2478,31.84824,0.38813309],
[103.3796667,23.39476667,0.164425194],
[120.4419677,41.6128048,0.290071237],
[114.6438667,38.01513333,0.588943182],
[107.00515,33.100225,0.361665063],
[111.6653375,40.8014625,0.293985988],
[120.6855,27.99855,0.214223301],
[115.363426,22.78472233,0.137629995],
[98.50565,39.7377,0.239375394],
[116.33628,27.99942,0.27114395],
[121.6278,38.94953,0.208261119],
[114.7536813,23.72685863,0.187490912],
[87.5475,44.1756,0.603671373],
[117.0250245,30.55412449,0.369171052],
[109.9082667,40.62778333,0.308479361],
[112.4312,39.34474,0.343359594],
[108.1227667,24.70053333,0.202302681],
[116.6198449,35.42655207,0.449137257],
[116.3018055,37.45422234,0.482302363],
[117.3378685,39.10484162,0.433147147],
[120.3868851,36.11952267,0.253097698],
[118.0001852,37.37444444,0.472927328],
[117.810573,30.93106622,0.390083629],
[111.7072224,28.9914224,0.329738659],
[119.359,26.07511667,0.149103741],
[106.6315,23.89275,0.268012357],
[79.49984848,25.11784361,0.576706121],
[122.0324103,46.07575433,0.114996331],
[87.2857,44.02055,0.521901693],
[115.9940887,36.45236048,0.51927925],
[113.5622667,37.8607,0.504968564],
[105.298195,27.30139,0.23870501],
[113.12606,41.0196595,0.167786326],
[111.0160644,35.05303778,0.513188312],
[115.8841111,28.70373333,0.194886452],
[112.8463833,35.50058333,0.513163031],
[101.6903694,26.56361018,0.245821966],
[109.1636808,21.47291675,0.191507948],
[120.52985,36.8764,0.322548251],
[117.6673667,24.49636667,0.213571494],
[119.04232,25.43068,0.170313826],
[113.2339682,35.22121548,0.571508016],
[113.071,22.578475,0.21289301],
[112.5933333,26.90018333,0.334965134],
[112.7288611,37.70111945,0.445048487],
[114.2352773,30.56543445,0.383189616],
[104.6162167,28.7696,0.415408052],
[112.043333,22.936759,0.225845417],
[119.5077084,32.18520834,0.448865375],
[116.8695333,32.6531,0.462722711],
[105.061975,29.59215,0.282588233],
[112.7247333,38.45443333,0.436083361],
[127.4716,50.24716667,0.094734578],
[120.54215,31.8722,0.316335983],
[101.5431,25.04665,0.150520612],
[112.9846,28.20576,0.369988853]];
  var optionID_20211223001405_74556 =
  {

  backgroundColor: 'white',
  color: ['gold','aqua','lime'],
  title : {
  text: '',
  subtext:'',
  x:'center',
  textStyle : {
  color: '#fff'
  }
  },
  tooltip : {
  trigger: 'item',
  formatter: function (v) {
  if(v[2].tooltipValue!=null){
  return v[2].tooltipvalue;
  }else{
  return v[1];
  }
  }},
  dataRange: {
    show: false,
    min : 0,
    max : 100,
    calculable : true,
    color: ['#ff3333', 'orange', 'yellow','lime','aqua'],
    textStyle:{
      color:'#fff'
    }
  },
  legend: {
  show:false,
  orient: 'vertical',
  x:'left',
  data:['Data'],
  textStyle:{color:'backgroundColorData'}

  },
  toolbox: {
  show : true,
  orient : 'vertical',
  x: 'right',
  y: 'center',
  feature : {
  mark : {show: true},
  dataView : {show: true, readOnly: false},
  restore : {show: true},
  saveAsImage : {show: true}
  }
  },
  series : [
  {
  name:'Data',
  type:'map',
  mapType: 'china',
  roam: true,
  itemStyle:{
  normal:{
  borderColor:'blue',
  borderWidth: 0.5,
  label:{show:true,textStyle:{color:'#fff'}},
  areaStyle: {color: 'backgroundColorData'}
  },
  emphasis:{label:{show:true,textStyle:{color:'#fff'}}}
  },
  data:[]
  ,heatmap: {
                      blurSize:35 ,
                      colors:['red', 'white'] ,
                      minAlpha:0.3 ,
                      opacity:1 ,
                      data: heatData}
  
  
  }]
  }
;
  myChart.setOption(optionID_20211223001405_74556);
  </script>
</div>
<div id="remapcç»˜åˆ¶å¡«å……åœ°å›¾" class="section level4" number="4.2.3.3">
<h4><span class="header-section-number">4.2.3.3</span> remapCç»˜åˆ¶å¡«å……åœ°å›¾</h4>
<p><code>remapC()</code>å…è®¸æˆ‘ä»¬åŒæ—¶åœ¨ä¸€å¼ åœ°å›¾ä¸Šåˆ¶ä½œå¡«å……å›¾å’Œç‚¹å›¾ã€çº¿å›¾ã€‚</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="maps.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">remapC</span>(data,</span>
<span id="cb65-2"><a href="maps.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">maptype =</span> <span class="st">&quot;china&quot;</span>,</span>
<span id="cb65-3"><a href="maps.html#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">markLineData =</span> <span class="cn">NULL</span>,</span>
<span id="cb65-4"><a href="maps.html#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">markPointData =</span> <span class="cn">NULL</span>,</span>
<span id="cb65-5"><a href="maps.html#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> <span class="fu">c</span>(<span class="st">&quot;#1e90ff&quot;</span>, <span class="st">&quot;#f0ffff&quot;</span>),</span>
<span id="cb65-6"><a href="maps.html#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">theme =</span> <span class="fu">get_theme</span>(<span class="st">&quot;Bright&quot;</span>),</span>
<span id="cb65-7"><a href="maps.html#cb65-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb65-8"><a href="maps.html#cb65-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">subtitle =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb65-9"><a href="maps.html#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">markLineTheme =</span> <span class="fu">markLineControl</span>(),</span>
<span id="cb65-10"><a href="maps.html#cb65-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">markPointTheme =</span> <span class="fu">markPointControl</span>(),</span>
<span id="cb65-11"><a href="maps.html#cb65-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">geoData =</span> <span class="cn">NA</span>,</span>
<span id="cb65-12"><a href="maps.html#cb65-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">mindata =</span> <span class="cn">NA</span>,</span>
<span id="cb65-13"><a href="maps.html#cb65-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">maxdata =</span> <span class="cn">NA</span></span>
<span id="cb65-14"><a href="maps.html#cb65-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>ä¸»è¦å‚æ•°ï¼š<br />
<strong>data</strong>ä¸ºéœ€è¦çš„åŸå§‹æ•°æ®æ¡†æ ¼å¼æ•°æ®ï¼Œå…±2åˆ—ï¼Œç¬¬ä¸€åˆ—ä¸ºçœä»½æˆ–è€…åŸå¸‚åç§°ï¼Œç¬¬äºŒåˆ—ä¸ºå¯¹åº”çš„æ•°å€¼ï¼Œæ•°å€¼å¤§å°å°†å†³å®šåœ°å›¾é¢œè‰²æ·±æµ…ã€‚<br />
<strong>maptype</strong>ä¸ºåœ°å›¾ç±»å‹è®¾ç½®ï¼Œå¯é€‰worldã€chinaæˆ–è€…ä¸­å›½çœä»½åç§°<br />
<strong>color</strong>ä¸ºçƒ­åŠ›å›¾æ¸å˜é¢œè‰²ï¼Œé»˜è®¤ä¸º2ä¸ªé¢œè‰²ï¼Œç¬¬ä¸€ä¸ªä¸ºç»ˆæ­¢è‰²ï¼Œç¬¬äºŒä¸ªä¸ºåˆå§‹è‰²<br />
<strong>mindata</strong>ä¸<strong>maxdata</strong>å¯ä»¥è®¾ç½®é¢œè‰²æç«¯ç‚¹å¯¹åº”æ•°æ®çš„ä¸Šä¸‹é™ï¼ˆé»˜è®¤æ˜¯ä½¿ç”¨dataä¸­çš„æ•°æ®æœ€å¤§å€¼æœ€å°å€¼ä½œä¸ºä¸¤ç«¯æå€¼ï¼‰ã€‚</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="maps.html#cb66-1" aria-hidden="true" tabindex="-1"></a>province <span class="ot">&lt;-</span> <span class="fu">mapNames</span>(<span class="st">&quot;china&quot;</span>) <span class="co"># å…¨å›½çœä»½</span></span>
<span id="cb66-2"><a href="maps.html#cb66-2" aria-hidden="true" tabindex="-1"></a>value <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">34</span>, <span class="dv">100</span>, <span class="dv">30</span>) <span class="co"># éšæœºç”Ÿæˆåˆ†çœå€¼</span></span>
<span id="cb66-3"><a href="maps.html#cb66-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(province, value) <span class="co"># åˆæˆæ•°æ®æ¡†ä½œå›¾æ•°æ®</span></span>
<span id="cb66-4"><a href="maps.html#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="fu">remapC</span>(mydata,</span>
<span id="cb66-5"><a href="maps.html#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">maptype =</span> <span class="st">&quot;China&quot;</span>, <span class="at">color =</span> <span class="fu">c</span>(<span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;red&quot;</span>),</span>
<span id="cb66-6"><a href="maps.html#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;å…¨å›½åˆ†çœå›¾&quot;</span></span>
<span id="cb66-7"><a href="maps.html#cb66-7" aria-hidden="true" tabindex="-1"></a>) <span class="co"># åˆ¶ä½œç­‰çº§å›¾</span></span></code></pre></div>
<div id="main4" style="width: 700px; height:466px;"></div>
  <script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
  <script src = "http://echarts.baidu.com/build/dist/echarts-all.js"></script>
  <script>
  var myChart = echarts.init(document.getElementById("main4"));

  var optionID_20211223002124_118480 = 
{
  backgroundColor: '#D9D9D9',
  color: ['gold','aqua','lime'],
  title : {
    text: 'å…¨å›½åˆ†çœå›¾',
    subtext:'',
    x:'center',
    textStyle : {
      color: '#1b1b1b'
    }
  },
  tooltip : {
    trigger: 'item',
    formatter: function (v) {
            if(typeof(v[2])=='number'){
            return(v[1]+': '+v[2])
            }else if(v[2].tooltipValue!=null){
            return v[2].tooltipValue;
          }else{
            return v[1];
          }
  }},
    legend: {
        show:false,
        orient: 'vertical',
        x:'left',
        data:['Data'],
        textStyle:{color:'#D9D9D9'}

    },
  toolbox: {
    show : true,
    orient : 'vertical',
    x: 'right',
    y: 'center',
    feature : {
      mark : {show: true},
      dataView : {show: true, readOnly: false},
      restore : {show: true},
      saveAsImage : {show: true}
    }
  },
  dataRange: {
    min : 22,
    max : 209,
    calculable : true,
    color: ['yellow', 'red'],
    textStyle:{
      color:'#1b1b1b'
    }
  },
  series : [
    {
    name:'Data',
    type:'map',
    mapType: 'china',
    itemStyle:{
    normal:{
    borderColor:'rgba(100,149,237,1)',
    borderWidth: 0.5,
    label:{show:true,textStyle:{color:'#1b1b1b'}},
    },
    emphasis:{label:{show:true,textStyle:{color:'#1b1b1b'}}}
  },
  data:[{name:'æ–°ç–†',value: 99.16015},
        {name:'è¥¿è—',value: 96.01056},
        {name:'å†…è’™å¤',value:122.37526},
        {name:'é’æµ·',value: 96.69881},
        {name:'å››å·',value:116.71160},
        {name:'é»‘é¾™æ±Ÿ',value:125.68131},
        {name:'ç”˜è‚ƒ',value: 32.68334},
        {name:'äº‘å—',value: 73.88564},
        {name:'å¹¿è¥¿',value:197.66872},
        {name:'æ¹–å—',value: 68.46319},
        {name:'é™•è¥¿',value: 98.68463},
        {name:'å¹¿ä¸œ',value:134.47487},
        {name:'å‰æ—',value:127.04263},
        {name:'æ²³åŒ—',value: 70.04408},
        {name:'æ¹–åŒ—',value:117.02832},
        {name:'è´µå·',value: 93.24028},
        {name:'å±±ä¸œ',value: 77.15386},
        {name:'æ±Ÿè¥¿',value:132.52203},
        {name:'æ²³å—',value: 58.84273},
        {name:'è¾½å®',value:119.98721},
        {name:'å±±è¥¿',value: 54.37361},
        {name:'å®‰å¾½',value:125.20147},
        {name:'ç¦å»º',value: 47.02378},
        {name:'æµ™æ±Ÿ',value: 63.84055},
        {name:'æ±Ÿè‹',value: 61.34687},
        {name:'é‡åº†',value:100.89941},
        {name:'å®å¤',value: 92.69678},
        {name:'æµ·å—',value:155.51616},
        {name:'å°æ¹¾',value: 71.73297},
        {name:'åŒ—äº¬',value: 60.77722},
        {name:'å¤©æ´¥',value:116.54781},
        {name:'ä¸Šæµ·',value:115.86285},
        {name:'é¦™æ¸¯',value:128.03343},
        {name:'æ¾³é—¨',value:130.82322}]
  
  
  }]
}
;
  myChart.setOption(optionID_20211223002124_118480);
  </script>
<p>æ¨¡æ‹Ÿå‡ºå¹¿ä¸œçœå›æµå„çœçš„äººå£æ•°ï¼Œä½¿ç”¨å¡«è‰²åœ°å›¾è¡¨ç¤ºäººæµè§„æ¨¡ï¼Œä½¿ç”¨åŠ¨æ€æµå‘çº¿è¡¨ç¤ºå›æµæœ€å¤§çš„å‰10ä¸ªçœä»½ã€‚</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="maps.html#cb67-1" aria-hidden="true" tabindex="-1"></a>province <span class="ot">&lt;-</span> <span class="fu">mapNames</span>(<span class="st">&quot;china&quot;</span>) <span class="co"># å…¨å›½çœä»½</span></span>
<span id="cb67-2"><a href="maps.html#cb67-2" aria-hidden="true" tabindex="-1"></a>value <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">34</span>, <span class="dv">1000</span>, <span class="dv">30</span>), <span class="dv">0</span>) <span class="co"># éšæœºç”Ÿæˆåˆ†çœå€¼</span></span>
<span id="cb67-3"><a href="maps.html#cb67-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(province, value) <span class="co"># åˆå¹¶æ•°æ®</span></span>
<span id="cb67-4"><a href="maps.html#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="maps.html#cb67-5" aria-hidden="true" tabindex="-1"></a>lableper <span class="ot">&lt;-</span> mydata[<span class="fu">order</span>(mydata[, <span class="st">&quot;value&quot;</span>], <span class="at">decreasing =</span> T), ][<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ]</span>
<span id="cb67-6"><a href="maps.html#cb67-6" aria-hidden="true" tabindex="-1"></a>origin <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">&quot;å¹¿å·&quot;</span>, <span class="fu">length</span>(lableper))</span>
<span id="cb67-7"><a href="maps.html#cb67-7" aria-hidden="true" tabindex="-1"></a>destination <span class="ot">&lt;-</span> lableper<span class="sc">$</span>province</span>
<span id="cb67-8"><a href="maps.html#cb67-8" aria-hidden="true" tabindex="-1"></a>line_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(origin, destination)</span>
<span id="cb67-9"><a href="maps.html#cb67-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-10"><a href="maps.html#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="fu">remapC</span>(mydata,</span>
<span id="cb67-11"><a href="maps.html#cb67-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;å¹¿ä¸œçœäººå£è¿å¾™åœ°å›¾&quot;</span>,</span>
<span id="cb67-12"><a href="maps.html#cb67-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">theme =</span> <span class="fu">get_theme</span>(<span class="st">&quot;Dark&quot;</span>),</span>
<span id="cb67-13"><a href="maps.html#cb67-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> <span class="fu">c</span>(<span class="st">&quot;#CD0000&quot;</span>, <span class="st">&quot;#FFEC8B&quot;</span>),</span>
<span id="cb67-14"><a href="maps.html#cb67-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">markLineData =</span> line_data,</span>
<span id="cb67-15"><a href="maps.html#cb67-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">markLineTheme =</span> <span class="fu">markLineControl</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">lineWidth =</span> <span class="dv">2</span>, <span class="at">lineType =</span> <span class="st">&quot;dashed&quot;</span>),</span>
<span id="cb67-16"><a href="maps.html#cb67-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">markPointData =</span> line_data[<span class="dv">2</span>],</span>
<span id="cb67-17"><a href="maps.html#cb67-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">markPointTheme =</span> <span class="fu">markPointControl</span>(</span>
<span id="cb67-18"><a href="maps.html#cb67-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">symbolSize =</span> <span class="dv">13</span>, <span class="at">effect =</span> T, <span class="at">effectType =</span> <span class="st">&quot;scale&quot;</span>,</span>
<span id="cb67-19"><a href="maps.html#cb67-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;white&quot;</span></span>
<span id="cb67-20"><a href="maps.html#cb67-20" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div id="main5" style="width: 700px; height:466px;"></div>
  <script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
  <script src = "http://echarts.baidu.com/build/dist/echarts-all.js"></script>
  <script>
  var myChart = echarts.init(document.getElementById("main5"));

  var optionID_20211223002722_1789 =
{
  backgroundColor: '#1b1b1b',
  color: ['gold','aqua','lime'],
  title : {
    text: 'å¹¿ä¸œçœäººå£è¿å¾™åœ°å›¾',
    subtext:'',
    x:'center',
    textStyle : {
      color: '#fff'
    }
  },
  tooltip : {
    trigger: 'item',
    formatter: function (v) {
         if(typeof(v[2])=='number'){
         return(v[1]+': '+v[2])
         }else if(v[2].tooltipValue!=null){
             return v[2].tooltipValue;
          }else{
            return v[1];
          }
  }},
    legend: {
        show:false,
        orient: 'vertical',
        x:'left',
        data:['Data'],
         textStyle:{color:'#1b1b1b'}

    },
  toolbox: {
    show : true,
    orient : 'vertical',
    x: 'right',
    y: 'center',
    feature : {
      mark : {show: true},
      dataView : {show: true, readOnly: false},
      restore : {show: true},
      saveAsImage : {show: true}
    }
  },
  dataRange: {
    min : 937,
    max : 1035,
    calculable : true,
    color: ['#CD0000', '#FFEC8B'],
    textStyle:{
      color:'#fff'
    }
  },
  series : [
    {
    name:'Data',
    type:'map',
    mapType: 'china',
    itemStyle:{
    normal:{
    borderColor:'rgba(100,149,237,1)',
    borderWidth: 0.5,
    label:{show:true,textStyle:{color:'#fff'}},
    },
    emphasis:{label:{show:true,textStyle:{color:'#fff'}}}
  },
  data:[{name:'æ–°ç–†',value: 966},
     {name:'è¥¿è—',value: 946},
     {name:'å†…è’™å¤',value: 974},
     {name:'é’æµ·',value: 961},
     {name:'å››å·',value: 943},
     {name:'é»‘é¾™æ±Ÿ',value:1001},
     {name:'ç”˜è‚ƒ',value: 964},
     {name:'äº‘å—',value:1011},
     {name:'å¹¿è¥¿',value:1000},
     {name:'æ¹–å—',value: 982},
     {name:'é™•è¥¿',value:1005},
     {name:'å¹¿ä¸œ',value: 986},
     {name:'å‰æ—',value: 981},
     {name:'æ²³åŒ—',value:1028},
     {name:'æ¹–åŒ—',value: 988},
     {name:'è´µå·',value: 994},
     {name:'å±±ä¸œ',value:1012},
     {name:'æ±Ÿè¥¿',value:1008},
     {name:'æ²³å—',value: 995},
     {name:'è¾½å®',value:1024},
     {name:'å±±è¥¿',value: 962},
     {name:'å®‰å¾½',value: 989},
     {name:'ç¦å»º',value: 958},
     {name:'æµ™æ±Ÿ',value:1004},
     {name:'æ±Ÿè‹',value: 988},
     {name:'é‡åº†',value: 971},
     {name:'å®å¤',value:1003},
     {name:'æµ·å—',value: 966},
     {name:'å°æ¹¾',value:1004},
     {name:'åŒ—äº¬',value: 945},
     {name:'å¤©æ´¥',value: 966},
     {name:'ä¸Šæµ·',value:1029},
     {name:'é¦™æ¸¯',value:1017},
     {name:'æ¾³é—¨',value: 955}]

  ,markLine : {
    Symbol:['none', 'arrow'],
    symbolSize:['2', '4'],
    smooth:true,
    smooth:0.2,
    effect : {
      show: true,
      scaleSize: 1,
      period: 30,
      color: '#fff',
      shadowBlur: 10
    },
    itemStyle : {
      color: 'red',
      normal: {
        color:'white',
        borderWidth:1,
        lineStyle: {
          type: 'dashed',
          width: 2,
          shadowBlur: 10
        },
        label:{show:false}
      }
    },

    data : [[{name:'å¹¿å·'}, {name:'ä¸Šæµ·',value:49}],
[{name:'å¹¿å·'}, {name:'æ²³åŒ—',value:76}],
[{name:'å¹¿å·'}, {name:'è¾½å®',value:88}],
[{name:'å¹¿å·'}, {name:'é¦™æ¸¯',value:43}],
[{name:'å¹¿å·'}, {name:'å±±ä¸œ',value:46}],
[{name:'å¹¿å·'}, {name:'äº‘å—',value:25}],
[{name:'å¹¿å·'}, {name:'æ±Ÿè¥¿',value: 9}],
[{name:'å¹¿å·'}, {name:'é™•è¥¿',value:14}],
[{name:'å¹¿å·'}, {name:'æµ™æ±Ÿ',value:35}],
[{name:'å¹¿å·'}, {name:'å°æ¹¾',value:81}]]},
    geoCoord:{'æ²³åŒ—': [114.5366,38.04320],
'è¾½å®': [123.4356,41.84147],
'é¦™æ¸¯': [114.1815,22.28293],
'å±±ä¸œ': [117.0274,36.67486],
'äº‘å—': [102.7164,25.05156],
'æ±Ÿè¥¿': [115.9154,28.68169],
'é™•è¥¿': [108.9604,34.27581],
'æµ™æ±Ÿ': [120.1595,30.27155],
'å°æ¹¾': [118.1393,24.50203],
'å¹¿å·': [113.2708,23.13531],
'ä¸Šæµ·': [121.4802,31.23631]
    }

  ,markPoint : {
        symbol:'emptyCircle',
      symbolSize :13,
      effect : {
        show: true,
        type: 'scale',
        shadowBlur : 0
      },
      itemStyle:{
      normal:{
        label:{show:false},
        color:'white'
      },
      emphasis: {
        label:{show:false}
      }
      },
      data : [{name:'ä¸Šæµ·',value:63,symbol:'emptyCircle'},
{name:'æ²³åŒ—',value:56,symbol:'emptyCircle'},
{name:'è¾½å®',value:52,symbol:'emptyCircle'},
{name:'é¦™æ¸¯',value:56,symbol:'emptyCircle'},
{name:'å±±ä¸œ',value:52,symbol:'emptyCircle'},
{name:'äº‘å—',value: 9,symbol:'emptyCircle'},
{name:'æ±Ÿè¥¿',value:29,symbol:'emptyCircle'},
{name:'é™•è¥¿',value: 6,symbol:'emptyCircle'},
{name:'æµ™æ±Ÿ',value:71,symbol:'emptyCircle'},
{name:'å°æ¹¾',value:10,symbol:'emptyCircle'}
      ]},
      geoCoord:{'æ²³åŒ—': [114.5366,38.04320],
'è¾½å®': [123.4356,41.84147],
'é¦™æ¸¯': [114.1815,22.28293],
'å±±ä¸œ': [117.0274,36.67486],
'äº‘å—': [102.7164,25.05156],
'æ±Ÿè¥¿': [115.9154,28.68169],
'é™•è¥¿': [108.9604,34.27581],
'æµ™æ±Ÿ': [120.1595,30.27155],
'å°æ¹¾': [118.1393,24.50203],
'å¹¿å·': [113.2708,23.13531],
'ä¸Šæµ·': [121.4802,31.23631]
                  }

  }]
}
;
  myChart.setOption(optionID_20211223002722_1789);
  </script>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="other-advanced-plots.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="plotly.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/TuozhenLiu/Advanced-Visualiztion/edit/main/04-Maps.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/TuozhenLiu/Advanced-Visualiztion/blob/main/04-Maps.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none"
}
});
});
</script>

</body>

</html>
