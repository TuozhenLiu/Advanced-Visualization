[["index.html", "é«˜çº§ç»Ÿè®¡ç»˜å›¾ Chapter 1 Introduction", " é«˜çº§ç»Ÿè®¡ç»˜å›¾ åˆ˜æ‹“è‡», éƒ‘æ©æ˜±, æˆ´ç¥ç¨ 2021-12-21 Chapter 1 Introduction å¤§æ•°æ®åˆ†æç»Ÿè®¡åŸºç¡€ï½œç¬¬ä¸ƒç»„ï½œPresentation &nbsp&nbsp&nbsp&nbsp Our Presentation Homepage ğŸ‘‡ &nbsp&nbsp&nbsp&nbsp ğŸ  https://tuozhenliu.github.io/Advanced-Visualiztion &nbsp&nbsp&nbsp&nbsp ğŸ›  Powered by bookdown and github pages &nbsp&nbsp&nbsp&nbsp ğŸ“® æ¬¢è¿è®¿é—®äº¤æµ^^ &mdash; åˆ˜æ‹“è‡», éƒ‘æ©æ˜±, æˆ´ç¥ç¨ References æ–¹åŒ¡å—, æœ±å»ºå¹³, å§œå¶é£. Ræ•°æ®åˆ†ææ–¹æ³•ä¸æ¡ˆä¾‹è¯¦è§£[M]. ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾, 2015. https://ggplot2-book.org https://plotly-r.com https://plotly.com/r/ https://echarts4r.john-coene.com/ https://github.com/jtr13/EDAVtemplate "],["ggplot2.html", "Chapter 2 ggplot2 2.1 æ•£ç‚¹å›¾ 2.2 æ¡å½¢å›¾å’Œç®±çº¿å›¾ 2.3 ç›´æ–¹å›¾å’Œå¯†åº¦æ›²çº¿å›¾ 2.4 æ—¶é—´åºåˆ—å›¾ 2.5 å›¾å½¢æ ‡æ³¨", " Chapter 2 ggplot2 ä¸€èˆ¬åŸºç¡€çš„ç”»å›¾Ræœ‰è‡ªå·±çš„åŸºç¡€å›¾å½¢ç³»ç»Ÿï¼Œä¾‹å¦‚graphicsåŒ…ï¼ŒgridåŒ…ç­‰ã€‚æˆ–è€…latticeåŒ…ã€‚ä¸è¿‡è¿™é‡Œè¦ä»‹ç»çš„ggplot2å®ƒæ˜¯ä¸€ä¸ªæœ‰ç€å®Œæ•´çš„ä¸€å¥—å›¾å½¢è¯­æ³•æ‰€æ”¯æŒçš„è½¯ä»¶åŒ…ï¼Œå…¶è¯­æ³•åŸºäºã€ŠGrammar of Graphicsã€‹ï¼ˆWilkinsonï¼Œ2005ï¼‰ä¸€ä¹¦ã€‚è¯¥ç»˜å›¾åŒ…çš„ç‰¹ç‚¹åœ¨äºå¹¶ä¸å»å®šä¹‰å…·ä½“çš„å›¾å½¢ï¼ˆå¦‚ç›´æ–¹å›¾ï¼Œæ•£ç‚¹å›¾ï¼‰ï¼Œè€Œæ˜¯å®šä¹‰å„ç§åº•å±‚ç»„ä»¶ï¼ˆå¦‚çº¿æ¡ã€æ–¹å—ï¼‰æ¥åˆæˆå¤æ‚çš„å›¾å½¢ï¼Œè¿™ä½¿å®ƒèƒ½ä»¥éå¸¸ç®€æ´çš„å‡½æ•°æ„å»ºå„ç±»å›¾å½¢ï¼Œè€Œä¸”é»˜è®¤æ¡ä»¶ä¸‹çš„ç»˜å›¾å“è´¨å°±èƒ½è¾¾åˆ°å‡ºç‰ˆè¦æ±‚ã€‚ é¦–å…ˆåœ¨ggplot2çš„è¯­æ³•ä¸­ï¼Œæœ‰å‡ ä¸ªæ¦‚å¿µéœ€è¦äº†è§£ï¼š å›¾å±‚ï¼ˆLayerï¼‰ï¼šå›¾å±‚å…è®¸ç”¨æˆ·ä¸€æ­¥æ­¥çš„æ„å»ºå›¾å½¢ï¼Œæ–¹ä¾¿å•ç‹¬å¯¹å›¾å±‚è¿›è¡Œä¿®æ”¹ã€å¢åŠ ã€ç”šè‡³æ”¹åŠ¨æ•°æ®ã€‚ æ ‡åº¦ï¼ˆScaleï¼‰ï¼šæ ‡åº¦æ˜¯ä¸€ç§å‡½æ•°ï¼Œå®ƒæ§åˆ¶äº†æ•°å­¦ç©ºé—´åˆ°å›¾å½¢å…ƒç´ ç©ºé—´çš„æ˜ å°„ã€‚ä¸€ç»„è¿ç»­æ•°æ®å¯ä»¥æ˜ å°„åˆ°Xè½´åæ ‡ï¼Œä¹Ÿå¯ä»¥æ˜ å°„åˆ°ä¸€ç»„è¿ç»­çš„æ¸å˜è‰²å½©ã€‚ä¸€ç»„åˆ†ç±»æ•°æ®å¯ä»¥æ˜ å°„æˆä¸ºä¸åŒçš„å½¢çŠ¶ï¼Œä¹Ÿå¯ä»¥æ˜ å°„æˆä¸ºä¸åŒçš„å¤§å°ã€‚ åæ ‡ç³»ç»Ÿï¼ˆCoordinateï¼‰ï¼šåæ ‡è½´å¯ä»¥è¿›è¡Œå˜æ¢ä»¥æ»¡è¶³ä¸åŒçš„éœ€è¦ï¼Œé™¤ç›´è§’åæ ‡å¤–è¿˜æœ‰å¯¹æ•°åæ ‡ã€æåæ ‡ç­‰ã€‚ ä½é¢ï¼ˆFacetï¼‰ï¼šå¾ˆå¤šæ—¶å€™éœ€è¦å°†æ•°æ®æŒ‰æŸç§æ–¹æ³•åˆ†ç»„ï¼Œåˆ†åˆ«è¿›è¡Œç»˜å›¾ã€‚ä½é¢å°±æ˜¯æ§åˆ¶åˆ†ç»„ç»˜å›¾çš„æ–¹æ³•å’Œæ’åˆ—å½¢å¼ã€‚ 2.1 æ•£ç‚¹å›¾ ä¸€èˆ¬å¯¹äºä¸€ç³»åˆ—è§‚æµ‹å€¼çš„å›¾å½¢æè¿°ï¼Œå¯ä»¥ç”¨æ•£ç‚¹å›¾æ¥ç›´è§‚è¡¨è¾¾ã€‚è¿™é‡ŒåŸºæœ¬çš„æ•£ç‚¹å›¾ç»˜åˆ¶å¯ä»¥ä½¿ç”¨qplot()å‡½æ•°ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨ggplot2åŒ…ä¸­å…³äº50000é¢—é’»çŸ³çš„æ•°æ®é›†diamondsæ¥è¿›è¡Œè¯´æ˜ã€‚ library(ggplot2) qplot(carat,price,data=diamonds) ä¸Šå›¾è¡¨ç¤ºäº†é’»çŸ³ä»·æ ¼å’Œé‡é‡çš„å…³ç³»çš„æ•£ç‚¹å›¾ï¼Œå› ä¸ºæœ‰50000ä¸ªæ•°æ®ï¼Œå¾ˆå¤šç‚¹éƒ½ä¼šé‡åˆåœ¨ä¸€èµ·ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¯ä»¥æ·»åŠ å¯¹ç”¨é¢œè‰²å¯¹é’»çŸ³é¢œè‰²å’Œç”¨ä¸åŒçš„å½¢çŠ¶åˆ‡å·¥çš„ä¿¡æ¯è¿›è¡ŒåŒºåˆ†ï¼š qplot(carat,price,data=diamonds,colour=color) qplot(carat,price,data=diamonds,shape=cut) å½“ç„¶è¿˜å¯ä»¥é€šè¿‡é€æ˜åº¦çš„ä¿®æ”¹ï¼Œæ¥å¯¹é‡å çš„éƒ¨åˆ†è¿›è¡Œä¸€äº›åŒºåˆ†ã€‚åœ¨qplot()ä¸­åªéœ€æ·»åŠ é€‰é¡¹alpha=I(1/n)ï¼Œå…¶ä¸­nä»£è¡¨äº†è¯¥ç‚¹ç»è¿‡å¤šå°‘æ¬¡é‡åˆåä¼šå˜å¾—ä¸å†é€æ˜ï¼š qplot(carat,price,data=diamonds,alpha= I(1/50)) å¯¹äºå¯†é›†æ•£ç‚¹ï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“çš„çœ‹å‡ºå¤§éƒ¨åˆ†ç‚¹åœ¨å“ªé‡Œé‡å ï¼Œè¿™ç§æ–¹å¼åœ¨æ•£ç‚¹å›¾ä¸Šç‚¹æ¯”è¾ƒå¤šçš„æ—¶å€™åˆ†è¾¨é‡å çš„ç‚¹çš„æ—¶å€™æœ‰å¾ˆå¥½çš„å¸®åŠ©ã€‚ æˆ–è€…ä½¿ç”¨ggplot()å‡½æ•°ä¸­çš„äºŒç»´ç›´æ–¹å›¾æ¥è¡¨ç°ï¼š p &lt;- ggplot(diamonds, aes(carat, price)) p + stat_bin2d(bins = 100) ä¸Šå›¾ä¸­ï¼Œé¢œè‰²çš„æ·±æµ…ä»£è¡¨äº†è¯¥éƒ¨åˆ†å¤§çº¦æœ‰å¤šå°‘ç‚¹é‡åˆã€‚é‡Œé¢çš„binsé€‰é¡¹å€¼çš„å¤§å°å†³å®šäº†åˆ†å—åŒºåŸŸçš„å¤§å°ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœè¿˜éœ€è¦å¯¹ä¸Šè¿°é’»çŸ³æ•°æ®æŒ‰ç…§é¢œè‰²(color)æˆ–è€…åˆ‡å·¥(cut)åœ¨æ•£ç‚¹å›¾å¦‚ä¸ŠåŠ ä»¥åŒºåˆ†çš„è¯ï¼Œåˆ™éœ€è¦ç”¨åˆ°ggplot()å‡½æ•°ï¼š p &lt;- ggplot(diamonds, aes(carat, price)) p + geom_point(aes(colour = cut,shape = cut, size = depth), alpha = 0.6, position = &#39;jitter&#39;) ä¸ºäº†å±•ç¤ºæ•°æ®çš„è¶‹åŠ¿ï¼Œä¸€èˆ¬éœ€è¦åœ¨æ•£ç‚¹å›¾ä¸Šé¢æ·»åŠ ä¸€æ¡å¹³æ»‘çš„æ›²çº¿ã€‚è¿™é‡Œå¯ä»¥é€šè¿‡æ·»åŠ smoothå¯¹è±¡ä¼ é€’ç»™geomå‚æ•°ï¼Œå®ƒä¼šå°†è¿™äº›å›¾æŒ‰ç…§é¡ºåºè¿›è¡Œé‡å ï¼š qplot(carat,price,data=diamonds,geom=c(&quot;point&quot;,&quot;smooth&quot;)) å¦å¤–è¿˜å¯ä»¥ä½¿ç”¨æ›´å…¨é¢çš„ggplot()å‡½æ•°åŠ ä¸Šgeom_point()ã€geom_smooth()æ¥å®ç°ä¸Šé¢çš„ç»“æœå¹¶ä½œå‡ºæ›´å¤šè¯ é‡Šã€‚ä¾‹å¦‚æƒ³è¦åœ¨ä¸Šé¢å¹³æ»‘çš„åŸºç¡€ä¸Šåˆ†åˆ«å¯¹ä¸åŒåˆ‡å·¥è¿›è¡Œå¹³æ»‘å¹¶ç”¨é¢œè‰²åŠ ä»¥åŒºåˆ†ï¼š p &lt;- ggplot(diamonds, aes(carat, price,colour=cut)) p + geom_point(alpha=0.1) + geom_smooth() 2.2 æ¡å½¢å›¾å’Œç®±çº¿å›¾ å¯¹äºç¦»æ•£å‹å˜é‡ï¼Œé¢‘æ•°ä¸€èˆ¬å¯ä»¥ä½¿ç”¨æ¡å½¢å›¾æ¥ç»˜åˆ¶ï¼Œå¹¶ä¸”ä¸éœ€è¦åƒåŸºç¡€å›¾å½¢ä¸‹é¢ä½¿ç”¨barchartå…ˆå¯¹æ•°æ®è¿›è¡Œæ±‡æ€»ã€‚è¿™é‡Œç›´æ¥ä½¿ç”¨geom=â€œbarâ€å³å¯ï¼Œå¹¶ä¸”å¦‚æœéœ€è¦å¯¹æ•°æ®åˆ†ç»„ï¼Œå¯ä»¥ä½¿ç”¨wightæ¥è¡¨è¾¾ï¼š qplot(color,data=diamonds,geom=&quot;bar&quot;) qplot(color,data=diamonds,geom=&quot;bar&quot;,weight=carat)+scale_y_continuous(&quot;carat&quot;) æ­¤å¤–ï¼Œè¿˜å¯ä»¥å¯¹æ¡å½¢å›¾åˆ†ç»„å¹¶ç»˜åˆ¶ä¸åŒç±»å‹çš„æ¡å½¢å›¾ã€‚ä¸€èˆ¬è°ƒæ•´çš„å‚æ•°æœ‰stackã€dodgeã€fillã€identityï¼Œstackæ–¹å¼æ˜¯å°†ä¸åŒå¹´ä»½æ•°æ®å †å æ”¾ç½®ï¼›dodgeæ–¹å¼æ˜¯å°†ä¸åŒå¹´ä»½çš„æ•°æ®å¹¶åˆ—æ”¾ç½®ï¼›fillæ–¹å¼å’Œstackç±»ä¼¼ï¼Œä½†Yè½´ä¸å†æ˜¯è®¡æ•°ï¼Œè€Œæ˜¯ä»¥ç™¾åˆ†æ¯”æ˜¾ç¤ºï¼›identityæ–¹å¼æ˜¯ä¸åšä»»ä½•æ”¹å˜ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®é€æ˜åº¦æ‰èƒ½çœ‹å¾—æ¸…æ¥š,é»˜è®¤æ˜¯stackï¼š p &lt;- ggplot(data=diamonds,aes(x=color,fill=factor(cut))) p + geom_bar(position=&#39;stack&#39;) p + geom_bar(position=&#39;dodge&#39;) p + geom_bar(position=&#39;fill&#39;) p + geom_bar(position=&#39;identity&#39;,alpha=0.3) å¦‚æœéœ€è¦ä½¿ç”¨ç®±çº¿å›¾æ¥æè¿°è¿ç»­å˜é‡åœ¨ä¸åŒç±»åˆ«ä¸‹é¢çš„å˜åŒ–æƒ…å†µå¯ä»¥ä½¿ç”¨ç®±çº¿å›¾æ¥æè¿°ï¼Œå‚æ•°ä¸ºï¼šgeom=â€œboxplotâ€ã€‚ä¾‹å¦‚ç ”ç©¶ä¸åŒé¢œè‰²ä¸‹æ¯å…‹æ‹‰é’»çŸ³ä»·æ ¼çš„åˆ†å¸ƒæƒ…å†µ: qplot(color,price/carat,data=diamonds,geom=&quot;boxplot&quot;) åˆæˆ–è€…ï¼Œä½¿ç”¨ggplot()å‡½æ•°æ¥è¿›è¡Œç»˜åˆ¶ï¼Œè¿˜å¯ä»¥å˜æˆå°æç´æ ·å¼çš„ç®±çº¿å›¾ã€‚å…¶ä¸­geom_violin()ç»˜åˆ¶å°æç´å›¾ï¼Œgeom_jitter()ç»˜åˆ¶æ‰°åŠ¨ç‚¹å›¾ï¼š p &lt;- ggplot(diamonds,aes(color,price/carat,fill=color)) p + geom_boxplot() p + geom_violin(alpha=0.8,width=0.9) + geom_jitter(shape= 21, alpha = 0.03) 2.3 ç›´æ–¹å›¾å’Œå¯†åº¦æ›²çº¿å›¾ ä¸€èˆ¬å¯¹äºè¿ç»­æ€§æ•°æ®æˆ‘ä»¬ä¼šåªç”¨ç›´æ–¹å›¾æˆ–è€…å¯†åº¦æ›²çº¿å›¾æ¥ç»˜åˆ¶ã€‚è¿™é‡Œåªéœ€åœ¨qplot()ä¸Šé¢æ·»åŠ å‚æ•°geom=â€œhistogramâ€å’Œgeom=â€œdensityâ€ã€‚æ¥è¿›è¡Œå®ç°ã€‚å…¶ä¸­ï¼Œç›´æ–¹å›¾çš„ç»„è·ä½¿ç”¨binwidthå‚æ•°æ¥è¿›è¡Œè°ƒæ•´ï¼Œå¯†åº¦æ›²çº¿çš„å¹³æ»‘ç¨‹åº¦åˆ™ä½¿ç”¨adjustå‚æ•°æ¥è¿›è¡Œè®¾å®šï¼š qplot(carat,data=diamonds,geom=&quot;histogram&quot;,binwidth=1) qplot(carat,data=diamonds,geom=&quot;histogram&quot;,binwidth=0.1) qplot(carat,data=diamonds,geom=&quot;histogram&quot;,binwidth=0.01) æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨fillæˆ–colourå‚æ•°æŒ‡å®šåˆ†ç±»çš„å˜é‡ä»è€Œå®ç°åœ¨åŒä¸€å›¾ä¸Šä½¿ç”¨ä¸åŒé¢œè‰²æ¥æ ‡è¯†ä¸ç”¨ç§ç±»çš„ä¿¡æ¯ï¼š qplot(carat,data=diamonds,geom=&quot;histogram&quot;,fill=cut) qplot(carat,data=diamonds,geom=&quot;density&quot;,colour=cut) å¯¹äºç›´æ–¹å›¾å’Œå¯†åº¦æ›²çº¿å›¾ï¼Œè¿˜å¯ä»¥ç”¨ggplot()å‡½æ•°æ¥ç»˜åˆ¶ã€‚ä¹Ÿå¯ä»¥æŠŠä¸Šé¢ä¸¤è¿™ä¸ªå›¾åˆå¹¶åœ¨ä¸€èµ·ï¼Œä»¥åŠåŠ ä¸Šæ›´ä¸ºå¤æ‚çš„å‚æ•°ï¼š p &lt;- ggplot(diamonds, aes(carat)) p + geom_histogram(position = &#39;identity&#39;,alpha=0.3,aes(y = ..density..,fill = cut),color=&quot;white&quot;) + stat_density(geom = &#39;line&#39;, position = &#39;identity&#39;, aes(colour = cut)) 2.4 æ—¶é—´åºåˆ—å›¾ å¯¹äºæ—¶é—´åºåˆ—æ•°æ®ç»˜å›¾ï¼Œå…¶å®å°±æ˜¯ç»˜åˆ¶çº¿æ¡å›¾ï¼Œåªéœ€è¦æ·»åŠ å‚æ•°geom=â€œlineâ€å³å¯ã€‚ä¾‹å¦‚ä½¿ç”¨economicsæ•°æ®é›†ç»˜åˆ¶ä¸€ä¸ªå…³äºå¤±ä¸šç‡çš„æ—¶é—´åºåˆ—å›¾ï¼š qplot(date,uempmed,data=economics,geom=&quot;line&quot;) 2.5 å›¾å½¢æ ‡æ³¨ åœ¨ç»˜å›¾æ­¥éª¤å®Œæˆä¹‹åï¼Œä¸€èˆ¬è¿˜éœ€è¦åŠ ä¸Šé¢å¤–çš„æ–‡å­—å’Œå›¾å½¢æ¥æ ‡æ³¨ã€‚ä¾‹å¦‚å¯¹äºå‰é¢çš„å¤±ä¸šç‡æ—¶é—´åºåˆ—ä¸ŠåŠ ä¸Šæ¯ä»»ç¾å›½æ€»ç»Ÿå°±èŒçš„æ—¶é—´ç‚¹ï¼š (unemp &lt;- qplot(date, uempmed, data=economics, geom=&quot;line&quot;)) presidential &lt;- presidential[-(1:3),] unemp + geom_vline(aes(xintercept = as.numeric(start)), data = presidential) æˆ–è€…è¿™ç§æ ‡è¯†æ¯”è¾ƒå•è°ƒï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å¯¹ä¸åŒæ€»ç»Ÿä»»æœŸçš„åŒºåŸŸèƒŒæ™¯ç€è‰²æ¥è¿›è¡ŒåŒºåˆ†ï¼š library(scales) xr &lt;- range(economics$date) yr &lt;- range(economics$uempmed) unemp + geom_rect(aes(NULL,NULL,xmin=start,xmax=end,fill=name),ymin=yr[1],ymax=yr[2],data=presidential,alpha=0.2) å¸¸ç”¨çš„åŸºç¡€ç»˜å›¾å‡½æ•°å’Œggplot2ä¸­å›¾å±‚çš„å¯¹ç…§å¦‚ä¸‹ï¼š åŸºç¡€ç»˜å›¾å‡½æ•° ggplot2ä¸­çš„å›¾å±‚ curve() geom_curve() hline() geom_hline() lines() geom_line() points() geom_point() polygon() geom_polygon() rect() geom_rect() rug() geom_rug() segments() geom_segment() text() geom_text() vline() geom_vline() abline(lm(y~x)) geom_smooth(method=â€œlmâ€) lines(density(x)) geom_density() lines(loess(x,y)) geom_smooth() "],["advanced-graphics.html", "Chapter 3 Advanced-graphics 3.1 åœ°å›¾", " Chapter 3 Advanced-graphics 3.1 åœ°å›¾ åœ°å›¾æ¯«æ— ç–‘é—®æ˜¯å±•ç¤ºåœ°ç†ä¿¡æ¯æ•°æ®æ—¶æœ€ç›´è§‚çš„å·¥å…·ï¼Œå°¤å…¶æ˜¯å½“åœ°å›¾å’Œç»Ÿè®¡é‡ç»“åˆæ—¶ï¼Œå…¶åŠŸæ•ˆåˆ™ä¼šè¿›ä¸€æ­¥åŠ å¼ºã€‚åœ¨æœ¬ä¹¦çš„ç¬¬ä¸€ç« ä¸­æ›¾ç»æåˆ°è¿‡John Snowçš„åœ°å›¾ï¼Œæ³¨æ„å›¾ä¸­ä¸ä»…æ ‡ç¤ºå‡ºäº†éœä¹±å‘ç”Ÿçš„åœ°ç‚¹ï¼Œæ¯ä¸ªåœ°ç‚¹çš„æ­»äº¡äººæ•°ä¹Ÿç”¨ç‚¹çš„æ•°ç›®æ ‡ç¤ºäº†å‡ºæ¥ã€‚å†å²ä¸Šè¿˜æœ‰ä¸å°‘ç±»ä¼¼çš„ä½¿ç”¨åœ°å›¾çš„ä¾‹å­ï¼Œè€Œåœ¨ä»Šå¤©ï¼Œåœ°ç†ä¿¡æ¯ç³»ç»Ÿ(GIS)å·²ç»æˆä¸ºç ”ç©¶ç©ºé—´å’Œåœ°ç†æ•°æ®çš„çƒ­é—¨å·¥å…·ï¼Œåœ°å›¾çš„åº”ç”¨ä¹Ÿæ˜¯å±¡è§ä¸é²œã€‚ åœ°å›¾çš„æœ¬è´¨æ˜¯å¤šè¾¹å½¢ï¼Œè€Œå¤šè¾¹å½¢çš„è¾¹ç•Œåˆ™ç”±åœ°ç†ç»çº¬åº¦æ•°æ®ç¡®å®šã€‚Rä¸­çš„é™„åŠ åŒ… maps (Brownriggï¼Œ2010)æ˜¯ç›®å‰æ¯”è¾ƒå®Œå–„çš„åœ°å›¾ç¨‹åºåŒ…ä¹‹ä¸€ï¼Œå› æ­¤æœ¬èŠ‚ä¸»è¦ä»‹ç»è¯¥ç¨‹åºåŒ…ã€‚ "],["plotly.html", "Chapter 4 Plotly 4.1 Overview 4.2 Plotly Pipeline 4.3 Plotly Foundations 4.4 Plotly Advanced", " Chapter 4 Plotly 4.1 Overview Plotlyæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å¼€æºäº¤äº’å¼å¯è§†åŒ–æ¡†æ¶ï¼Œå®ƒé€šè¿‡æ„å»ºåŸºäº HTML çš„äº¤äº’å¼å›¾è¡¨æ¥æ˜¾ç¤ºä¿¡æ¯ï¼Œå¯åˆ›å»ºå„ç§å½¢å¼çš„ç²¾ç¾å›¾è¡¨ã€‚Plotlyæä¾›äº†Pythonï¼ŒRï¼ŒMatlabç­‰å¤šç§è¯­è¨€APIï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨è¿™äº›è½¯ä»¶ä¸­è°ƒç”¨Plotlyï¼Œä»è€Œå¿«é€Ÿå®ç°äº¤äº’å¼çš„å¯è§†åŒ–ç»˜å›¾ã€‚ 4.2 Plotly Pipeline ä½¿ç”¨plotly-RåŒ…åˆ¶ä½œçš„å›¾å½¢æ˜¯ç”±JavaScriptåº“plotly.jsæä¾›åº•å±‚æ”¯æŒã€‚plotly-RåŒ…ä¸­çš„æ ¸å¿ƒå‡½æ•°æ˜¯plot_ly()ï¼Œå®ƒè¿æ¥äº†Rä¸jsã€‚æˆ‘ä»¬é¦–å…ˆæ¥å°è¯•ä½¿ç”¨plot_ly()æ¢ç´¢ggplot2ä¸­çš„diamondsæ•°æ®é›†ï¼Œäº†è§£å¦‚ä½•ä½¿ç”¨plotlyå·¥ä½œã€‚ 4.2.1 visualization demo # load packages library(plotly) library(dplyr) library(htmlwidgets) library(htmltools) # load the diamonds dataset from the ggplot2 package data(diamonds, package = &quot;ggplot2&quot;) diamonds ## # A tibble: 53,940 Ã— 10 ## carat cut color clarity depth table price x y z ## &lt;dbl&gt; &lt;ord&gt; &lt;ord&gt; &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 0.23 Ideal E SI2 61.5 55 326 3.95 3.98 2.43 ## 2 0.21 Premium E SI1 59.8 61 326 3.89 3.84 2.31 ## 3 0.23 Good E VS1 56.9 65 327 4.05 4.07 2.31 ## 4 0.29 Premium I VS2 62.4 58 334 4.2 4.23 2.63 ## 5 0.31 Good J SI2 63.3 58 335 4.34 4.35 2.75 ## 6 0.24 Very Good J VVS2 62.8 57 336 3.94 3.96 2.48 ## 7 0.24 Very Good I VVS1 62.3 57 336 3.95 3.98 2.47 ## 8 0.26 Very Good H SI1 61.9 55 337 4.07 4.11 2.53 ## 9 0.22 Fair E VS2 65.1 61 337 3.87 3.78 2.49 ## 10 0.23 Very Good H VS1 59.4 61 338 4 4.05 2.39 ## # â€¦ with 53,930 more rows plot_ly(diamonds, x = ~cut) plot_ly(diamonds, x = ~cut, y = ~clarity) plot_ly(diamonds, x = ~cut, color = ~clarity, colors = &quot;Accent&quot;) 4.2.2 easy to add trace p &lt;- diamonds %&gt;% plot_ly(x = ~cut) %&gt;% add_histogram(name = &quot;hist&quot;) %&gt;% group_by(cut) %&gt;% summarise(n = n()) %&gt;% add_text( text = ~scales::comma(n), y = ~n, textposition = &quot;top middle&quot;, cliponaxis = FALSE, name = &quot;text&quot; ) %&gt;% ungroup() %&gt;% mutate(avg = mean(n)) %&gt;% add_lines(y = ~avg, opacity = 0.8, line =list(width=2), name = &quot;avg&quot; ) p 4.2.3 getting raw data p %&gt;% plotly_data() ## # A tibble: 5 Ã— 3 ## cut n avg ## &lt;ord&gt; &lt;int&gt; &lt;dbl&gt; ## 1 Fair 1610 10788 ## 2 Good 4906 10788 ## 3 Very Good 12082 10788 ## 4 Premium 13791 10788 ## 5 Ideal 21551 10788 4.2.4 publishing output saveWidget(p, &quot;p.html&quot;, selfcontained = F, libdir = &quot;lib&quot;) 4.3 Plotly Foundations æ­£å¦‚æˆ‘ä»¬åœ¨ç¬¬2èŠ‚ä¸­æ‰€çœ‹åˆ°çš„ï¼Œä¸€ä¸ªplotlyå›¾åƒç”±å¤šæ¡traceç»„æˆï¼Œæ¯ç§traceå¯¹åº”ä¸€ä¸ªç”»å›¾ç±»å‹ï¼Œä¾‹å¦‚ï¼Œç‚¹ã€çº¿ã€æ–‡æœ¬å’Œå¤šè¾¹å½¢ï¼Œä¸R base plot å’Œ ggplot2ç±»ä¼¼ã€‚è¿™äº›traceé€šè¿‡add_trace()æˆ–add_*()å‡½æ•°ï¼ˆadd_markers(), add_lines(), add_paths(), add_segments(), add_ribbons(), add_area(), and add_polygons()ç­‰ï¼‰æ¥åˆ›å»ºã€‚ 4.3.1 markers # load the mpg dataset from the ggplot2 package data(mpg, package = &quot;ggplot2&quot;) mpg ## # A tibble: 234 Ã— 11 ## manufacturer model displ year cyl trans drv cty hwy fl class ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; ## 1 audi a4 1.8 1999 4 autoâ€¦ f 18 29 p compâ€¦ ## 2 audi a4 1.8 1999 4 manuâ€¦ f 21 29 p compâ€¦ ## 3 audi a4 2 2008 4 manuâ€¦ f 20 31 p compâ€¦ ## 4 audi a4 2 2008 4 autoâ€¦ f 21 30 p compâ€¦ ## 5 audi a4 2.8 1999 6 autoâ€¦ f 16 26 p compâ€¦ ## 6 audi a4 2.8 1999 6 manuâ€¦ f 18 26 p compâ€¦ ## 7 audi a4 3.1 2008 6 autoâ€¦ f 18 27 p compâ€¦ ## 8 audi a4 quattro 1.8 1999 4 manuâ€¦ 4 18 26 p compâ€¦ ## 9 audi a4 quattro 1.8 1999 4 autoâ€¦ 4 16 25 p compâ€¦ ## 10 audi a4 quattro 2 2008 4 manuâ€¦ 4 20 28 p compâ€¦ ## # â€¦ with 224 more rows 4.3.1.1 Alpha plot_ly(mpg, x = ~cty, y = ~hwy) %&gt;% add_markers(alpha = 0.3) 4.3.1.2 Colors discrete plot_ly(mpg, x = ~cty, y = ~hwy) %&gt;% add_markers(color = ~factor(cyl)) continuous plot_ly(mpg, x = ~cty, y = ~hwy) %&gt;% add_markers(color = ~cyl) %&gt;% colorbar() no mapping data values plot_ly(mpg, x = ~cty, y = ~hwy) %&gt;% add_markers(color = I(&quot;black&quot;)) 4.3.1.3 Symbols plot_ly(mpg, x = ~cty, y = ~hwy) %&gt;% add_markers(symbol = ~factor(cyl)) 4.3.1.4 Size plot_ly(mpg, x = ~cty, y = ~hwy, alpha = 0.3) %&gt;% add_markers(size = ~cyl) 4.3.2 Lines # load the txhousing dataset from the ggplot2 package data(txhousing, package = &quot;ggplot2&quot;) txhousing ## # A tibble: 8,602 Ã— 9 ## city year month sales volume median listings inventory date ## &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Abilene 2000 1 72 5380000 71400 701 6.3 2000 ## 2 Abilene 2000 2 98 6505000 58700 746 6.6 2000. ## 3 Abilene 2000 3 130 9285000 58100 784 6.8 2000. ## 4 Abilene 2000 4 98 9730000 68600 785 6.9 2000. ## 5 Abilene 2000 5 141 10590000 67300 794 6.8 2000. ## 6 Abilene 2000 6 156 13910000 66900 780 6.6 2000. ## 7 Abilene 2000 7 152 12635000 73500 742 6.2 2000. ## 8 Abilene 2000 8 131 10710000 75000 765 6.4 2001. ## 9 Abilene 2000 9 104 7615000 64500 771 6.5 2001. ## 10 Abilene 2000 10 101 7040000 59300 764 6.6 2001. ## # â€¦ with 8,592 more rows 4.3.2.1 Linetypes top5 &lt;- txhousing %&gt;% group_by(city) %&gt;% summarise(avg = mean(sales, na.rm = TRUE)) %&gt;% arrange(desc(avg)) %&gt;% top_n(5) tx5 &lt;- semi_join(txhousing, top5, by = &quot;city&quot;) plot_ly(tx5, x = ~date, y = ~median) %&gt;% add_lines(linetype = ~city) 4.3.3 Bars &amp; histograms p1 &lt;- plot_ly(diamonds, x = ~price) %&gt;% add_histogram() p2 &lt;- plot_ly(diamonds, x = ~cut) %&gt;% add_histogram() subplot(p1, p2) %&gt;% hide_legend() Multiple numeric distributions one_plot &lt;- function(d) { plot_ly(d, x = ~price) %&gt;% add_histogram() %&gt;% add_annotations( ~unique(clarity), x = 0.5, y = 1, xref = &quot;paper&quot;, yref = &quot;paper&quot;, showarrow = FALSE ) } diamonds %&gt;% split(.$clarity) %&gt;% lapply(one_plot) %&gt;% subplot(nrows = 2, shareX = TRUE, titleX = FALSE) %&gt;% hide_legend() Multiple discrete distributions plot_ly(diamonds, x = ~cut, color = ~clarity) %&gt;% add_histogram() percent # number of diamonds by cut and clarity (n) cc &lt;- count(diamonds, cut, clarity) # number of diamonds by cut (nn) cc2 &lt;- left_join(cc, count(cc, cut, wt = n, name = &#39;nn&#39;)) cc2 %&gt;% mutate(prop = n / nn) %&gt;% plot_ly(x = ~cut, y = ~prop, color = ~clarity) %&gt;% add_bars() %&gt;% layout(barmode = &quot;stack&quot;) 4.3.4 Boxplots p &lt;- plot_ly(diamonds, y = ~price, color = I(&quot;black&quot;), alpha = 0.1, boxpoints = &quot;suspectedoutliers&quot;) p1 &lt;- p %&gt;% add_boxplot(x = &quot;Overall&quot;) p2 &lt;- p %&gt;% add_boxplot(x = ~cut) subplot( p1, p2, shareY = TRUE, widths = c(0.2, 0.8), margin = 0 ) %&gt;% hide_legend() d &lt;- diamonds %&gt;% mutate(cc = interaction(clarity, cut)) # interaction levels sorted by median price lvls &lt;- d %&gt;% group_by(cc) %&gt;% summarise(m = median(price)) %&gt;% arrange(m) %&gt;% pull(cc) plot_ly(d, x = ~price, y = ~factor(cc, lvls)) %&gt;% add_boxplot(color = ~clarity) %&gt;% layout(yaxis = list(title = &quot;&quot;)) 4.4 Plotly Advanced 4.4.1 ggplotly data(&quot;iris&quot;) one_ggplot &lt;- function(i = 1){ themr &lt;- ggthemr(palette[i], set_theme = FALSE) p &lt;- iris %&gt;% ggplot(aes(Sepal.Length, fill = Species)) + geom_histogram(binwidth = 0.2) + get_ggthemr_color(palette = palette[i], return_type = &quot;fill&quot;) + themr$theme return(p) } one_ggplot() one_ggplot() %&gt;% ggplotly() 4.4.2 layout title_font &lt;- list(color = &quot;white&quot;, size = 26, family = &quot;Microsoft YaHei&quot;) axis_font &lt;- list(color = &quot;white&quot;, size = 20, family = &quot;Microsoft YaHei&quot;) plot_ly(mpg, x = ~cty, y = ~hwy) %&gt;% add_markers(color = ~factor(cyl)) %&gt;% layout( title = list( text = paste(&#39;markers-dark-theme&#39;), font = title_font ), showlegend = TRUE, legend = list(font = list(color = &#39;white&#39;)), yaxis = list( tickmode=&#39;array&#39;, autorange = TRUE, showgrid = FALSE, title = list(text = &#39;cty&#39;) , showline = TRUE, color = &#39;white&#39;, font = axis_font, nticks = 4 ), xaxis = list( showline = TRUE, title = list(text = &#39;hwy&#39;), color = &#39;white&#39;, font = axis_font ), paper_bgcolor = &quot;#000000&quot;, plot_bgcolor = &quot;#000000&quot;, margin = list( t = 90, b = 90, l = 90, r = 90 ) ) 4.4.3 Javascript plotly_hover, plotly_click, plotly_selected p &lt;- plot_ly(mtcars, x = ~wt, y = ~mpg) %&gt;% add_markers( text = rownames(mtcars), customdata = paste0(&quot;https://www.bing.com/search?q=&quot;, rownames(mtcars)) ) onRender( p, &quot; function(el) { el.on(&#39;plotly_click&#39;, function(d) { var url = d.points[0].customdata; window.open(url); }); } &quot;) "],["visualization-project.html", "Chapter 5 Visualization Project 5.1 Industry analysis", " Chapter 5 Visualization Project 5.1 Industry analysis å›½å®¶å¼€å‘æŠ•èµ„é›†å›¢æœ‰é™å…¬å¸ï¼ˆç®€ç§°â€œå›½æŠ•â€ï¼‰æˆç«‹äº1995å¹´ï¼Œæ˜¯ä¸­å¤®ç›´æ¥ç®¡ç†çš„å›½æœ‰é‡è¦éª¨å¹²ä¼ä¸šï¼Œæ˜¯ä¸­å¤®ä¼ä¸šä¸­å”¯ä¸€çš„æŠ•èµ„æ§è‚¡å…¬å¸ï¼Œæ˜¯é¦–æ‰¹å›½æœ‰èµ„æœ¬æŠ•èµ„å…¬å¸æ”¹é©è¯•ç‚¹å•ä½ã€‚å›½æŠ•æ³¨å†Œèµ„æœ¬338äº¿å…ƒï¼Œæˆªè‡³2020å¹´æœ«ï¼Œé›†å›¢èµ„äº§æ€»é¢6823äº¿å…ƒï¼Œå‘˜å·¥çº¦5ä¸‡äººã€‚2020å¹´é›†å›¢å®ç°è¥ä¸šæ€»æ”¶å…¥1531äº¿å…ƒï¼Œåˆ©æ¶¦æ€»é¢221äº¿å…ƒï¼Œè¿ç»­17å¹´åœ¨å›½åŠ¡é™¢å›½èµ„å§”ç»è¥ä¸šç»©è€ƒæ ¸ä¸­è£è·Açº§ï¼Œè¿ç»­äº”ä¸ªä»»æœŸè·å¾—ä¸šç»©ä¼˜ç§€ä¼ä¸šã€‚ å›½æŠ•æˆç«‹ä»¥æ¥ï¼Œå§‹ç»ˆç§‰æ‰¿èµ„äº§ç»è¥ä¸èµ„æœ¬ç»è¥ç›¸ç»“åˆçš„ç»è¥ç†å¿µï¼ŒåšæŒæˆ˜ç•¥æŠ•èµ„ã€ä»·å€¼æŠ•èµ„ï¼ŒæŒç»­ä¼˜åŒ–å›½æœ‰èµ„æœ¬å¸ƒå±€ï¼Œæå‡äº§ä¸šç«äº‰åŠ›ï¼Œæ¨åŠ¨å›½æœ‰èµ„æœ¬å‘å…³ç³»å›½æ°‘ç»æµå‘½è„‰å’Œå›½è®¡æ°‘ç”Ÿçš„é‡è¦è¡Œä¸šå’Œå…³é”®é¢†åŸŸé›†ä¸­ï¼Œå‘æˆ˜ç•¥æ€§æ–°å…´äº§ä¸šé›†ä¸­ï¼Œæ¨åŠ¨æŠ•èµ„ä¼ä¸šé«˜è´¨é‡å‘å±•ï¼Œå®ç°å›½æœ‰èµ„æœ¬ä¿å€¼å¢å€¼ã€‚ å›½æŠ•è§„åˆ’ç”¨ä¸‰ä¸ªäº”å¹´çš„æ—¶é—´ï¼Œå»ºæˆå…·æœ‰å…¨çƒç«äº‰åŠ›çš„ä¸–ç•Œä¸€æµèµ„æœ¬æŠ•èµ„å…¬å¸ã€‚åˆ°2025å¹´é›†å›¢åˆ›ç«‹30å‘¨å¹´æ—¶ï¼Œé›†å›¢ç»¼åˆå®åŠ›ã€æ ¸å¿ƒç«äº‰åŠ›å’Œå¯æŒç»­å‘å±•èƒ½åŠ›å¤§å¹…æå‡ï¼Œåœ¨æˆ˜ç•¥æ€§æ–°å…´äº§ä¸šç»†åˆ†é¢†åŸŸåŸ¹è‚²è‹¥å¹²å¤´éƒ¨ä¼ä¸šï¼Œäº§ä¸šç»“æ„å’Œå¸ƒå±€æ›´åŠ ç§‘å­¦åˆç†ï¼Œè¿›å…¥ä¸–ç•Œ500å¼ºï¼Œä»å›½å†…ä¸€æµèµ°å‘å›½é™…ä¸€æµã€‚ é¡¹ç›®æ ¸å¿ƒä»»åŠ¡ï¼šé€šè¿‡äº¤äº’å¼ç»Ÿè®¡å›¾è¡¨ å±•ç°å›½æŠ•å·²æœ‰ä¸šåŠ¡å¸ƒå±€ æŒ–æ˜æ½œåœ¨æŠ•èµ„è¡Œä¸šä»·å€¼ ä¸ºæŠ•èµ„ç»è¥è€…æä¾›å‚è€ƒ "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
